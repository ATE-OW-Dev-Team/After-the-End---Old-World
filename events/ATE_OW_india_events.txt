#cricket events, basically modified versions of the mesoamerican ball game events in AtEFF##

namespace = indian_flavor

character_event = {
	id = indian_flavor.200
	desc = EVTDESC_cricket_game_start
	picture = GFX_evt_cricket
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	immediate = {
		set_character_flag = cricket_in_progress
	}
	
	option = {
		name = EVTOPTA_cricket_game_start # watch from the stands, cheer on selected team
		prestige = 25
		custom_tooltip = { text = TXT_EVTOPTA_cricket_game_start }
		hidden_tooltip = {
			random_list = {
				50 = {
					character_event = { id = indian_flavor.201 days = 1 } # your team wins! hooray!
				}
				50 = {
					character_event = { id = indian_flavor.202 days = 1 } # your team loses. whoops.
				}
			}
		}
	}
	
	option = {
		name = EVTOPTB_cricket_game_start # join the game. you better win...
		prestige = 50
		trigger = { # have to be in good physical condition
			character_disease_trigger = no
			has_symptom_trigger = no
			NOT = {	trait = infirm }
			NOT = {	trait = blinded }
			NOT = {	trait = mangled }
			NOT = {	trait = maimed }
			NOT = {	trait = one_handed }
			NOT = {	trait = one_legged }
			NOT = {	trait = severely_injured }
			NOT = { age = 40 }
		}
		custom_tooltip = { text = TXT_EVTOPTB_cricket_game_start }
		hidden_tooltip = {
			random_list = {
				50 = { # you win
					modifier = { # more likely if you're physically strong
						factor = 1.5
						OR = {
							trait = strong
							trait = robust
							trait = sturdy
							trait = giant
						}
					}
					modifier = { # far more likely if you are good at cricket already
						factor = 2
						OR = {
						    trait = cricketer
						}
					}
					modifier = { # less likely if you're physically weak or disabled
						factor = 0.75
						OR = {
							trait = weak
							trait = feeble
							trait = hunchback
							trait = dwarf
							trait = clubfooted
							trait = inbred
						}
					}	
					character_event = { id = indian_flavor.203 days = 1 }
				}
				50 = { # you lose
					modifier = { # more likely if you're physically weak or disabled
						factor = 1.5
						OR = {
							trait = weak
							trait = feeble
							trait = hunchback
							trait = dwarf
							trait = clubfooted
							trait = inbred
						}
					}				
					modifier = { # less likely if you're physically strong
						factor = 0.75
						OR = {
							trait = strong
							trait = robust
							trait = sturdy
							trait = giant
						}
					}
					modifier = { # far less likely if you are good at cricket already
						factor = 0.5
						OR = {
						    trait = cricketer
						}
					}
					character_event = { id = indian_flavor.204 days = 1 }
				}
			}
		}
	}
}

character_event = {
	id = indian_flavor.201
	desc = EVTDESC_cricket_game_win
	picture = GFX_evt_cricket_game
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	immediate = {
		set_character_flag = cricket_winning_team
	}
	
	option = {
		name = EVTOPTA_cricket_game_win
		prestige = 50
		if = {
			limit = {
				religion = maunaxite
			}
			character_event = { id = indian_flavor.205 days = 1 } # other captain executed
		}
		if = {
			limit = {
				NOT = { religion = maunaxite }
			}
			character_event = { id = indian_flavor.206 days = 1 } # end of game
		}
	}
}

character_event = {
	id = indian_flavor.202
	desc = EVTDESC_cricket_game_lose
	picture = GFX_evt_cricket_game
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	immediate = {
		set_character_flag = cricket_losing_team
	}
	
	option = {
		name = EVTOPTA_cricket_game_lose
		prestige = -50
		if = {
			limit = {
				religion = maunaxite
			}
			character_event = { id = indian_flavor.205 days = 1 } # your captain executed
		}
		if = {
			limit = {
				NOT = { religion = maunaxite }
			}
			character_event = { id = indian_flavor.206 days = 1 } # end of game
		}
	}
}

character_event = {
	id = indian_flavor.203
	desc = EVTDESC_cricket_game_personal_win
	picture = GFX_evt_cricket_game
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	immediate = {
		set_character_flag = cricket_winning_team
	}
	
	option = {
		name = EVTOPTA_cricket_game_personal_win
		prestige = 250
		if = {
			limit = {
				NOT = { trait = cricketer }
			}
			add_trait = cricketer
		}
		if = {
			limit = {
				religion = maunaxite
			}
			character_event = { id = indian_flavor.205 days = 1 } # other captain executed
		}
		if = {
			limit = {
				NOT = { religion = maunaxite }
			}
			character_event = { id = indian_flavor.206 days = 1 } # end of game
		}
	}
}

character_event = {
	id = indian_flavor.204
	desc = EVTDESC_cricket_game_personal_lose
	picture = GFX_evt_cricket_game
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	immediate = {
		set_character_flag = cricket_losing_team
	}
	
	option = {
		name = EVTOPTA_cricket_game_personal_lose
		prestige = -250
#		add_trait = wounded
		if = {
			limit = {
				trait = cricketer
			}
			remove_trait = cricketer
		}
		if = {
			limit = {
				religion = maunaxite
			}
			character_event = { id = indian_flavor.205 days = 1 } # other captain executed
		}
		if = {
			limit = {
				NOT = { religion = maunaxite }
			}
			character_event = { id = indian_flavor.206 days = 1 } # end of game
		}
	}
}

character_event = { # Execution of losing team's captain. neovedantics excluded.
	id = indian_flavor.205
	desc = {
		trigger = { has_character_flag = cricket_winning_team }
		text = EVTDESCA_cricket_captain_sacrifice
	}
	desc = {
		trigger = { has_character_flag = cricket_losing_team }
		text = EVTDESCB_cricket_captain_sacrifice
	}
	picture = GFX_evt_pagan_blood_sacrifice
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	option = {
		name = EVTOPTA_cricket_game_captain_sacrifice
		trigger = {
			has_character_flag = cricket_winning_team
		}
		piety = 100
		character_event = { id = indian_flavor.206 days = 1 } # end of game
	}
	
	option = {
		name = EVTOPTB_cricket_game_captain_sacrifice
		trigger = {
			has_character_flag = cricket_losing_team
		}
		piety = 50
		character_event = { id = indian_flavor.206 days = 1 } # end of game
	}
}

character_event = {
	id = indian_flavor.206
	desc = EVTDESC_cricket_game_conclusion
	picture = GFX_evt_cricket
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	trigger = {
		has_character_flag = cricket_in_progress
	}
	
	immediate = {
		clr_character_flag = do_not_disturb
		clr_character_flag = cricket_in_progress
		clr_character_flag = cricket_winning_team
		clr_character_flag = cricket_losing_team
	}
	
	option = {
		name = EVTOPTA_cricket_game_conclusion
		if = {
			limit = {
				religion = maunaxite
			}
			piety = 100
		}
		add_character_modifier = {
			name = recent_cricket_game
			duration = 3650
		}
	}
}
character_event = {
	id = indian_flavor.207
	desc = EVTDESC_rise_of_yama
	#picture = GFX_evt_cricket
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	trigger = {
	    ai = no
		dynasty = 26560313 #Kardi
		is_save_game = no
	}

	option = {
	    name = OPT_A_rise_of_yama
		effect = { add_trait = successor }
		effect = { add_trait = ambitious }
		spawn_unit = {
			province = 1174
			troops = {
				light_cavalry = { 200 200 }
				heavy_infantry = { 200 200 }
				archers = { 200 200 }
			}
			attrition = 0.5
			maintenance = no
			reinforces = yes
			cannot_inherit = no
			disband_on_peace = no
		}
		spawn_unit = {
			province = 1174
			troops = {
				light_cavalry = { 200 200 }
				heavy_infantry = { 200 200 }
				archers = { 200 200 }
			}
			attrition = 0.5
			maintenance = no
			reinforces = yes
			cannot_inherit = no
			disband_on_peace = no
		}
		spawn_unit = {
			province = 1174
			troops = {
				light_cavalry = { 200 200 }
				heavy_infantry = { 200 200 }
				archers = { 200 200 }
			}
			attrition = 0.5
			maintenance = no
			reinforces = yes
			cannot_inherit = no
			disband_on_peace = no
		}
	}
}
narrative_event = {
	id = indian_flavor.208
	title = TITLE_laskandar_restoration_kardi
	desc = {
		text = EVTDESC_laskandar_restoration_kardi
		trigger = {
			is_alternate_start = no
		}
	}
	picture = GFX_evt_laskandar_restoration
	is_triggered_only = yes

	#immediate = {
    #
	#}
	option = {
		name = OPT_A_laskandar_restoration_kardi
		prestige = 2000
		if = { #New Imperial Bloodline.
			limit = { 
				has_dlc = "Holy Fury" 
				is_female = no
			}
			create_bloodline = {
				type = yama_bloodline
			}
			sound_effect = bloodline_added			
		}
    }
}
narrative_event = {
	id = indian_flavor.209
	title = TITLE_laskandar_restoration
	desc = {
		text = EVTDESC_laskandar_restoration
		trigger = {
			is_alternate_start = no
		}
	}
	picture = GFX_evt_laskandar_restoration
	is_triggered_only = yes

	option = {
		name = OPT_A_laskandar_restoration
		prestige = 1000
    }
}
narrative_event = {
	id = indian_flavor.210
	title = TITLE_yunakshetra_restoration
	desc = {
		text = EVTDESC_yunakshetra_restoration
		trigger = {
			is_alternate_start = no
		}
	}
	picture = GFX_evt_yunakshetra_restoration
	trigger = {
	    dynasty = 26560301 #Sourasenos
		has_landed_title = k_yunan
		completely_controls = k_yunan
		NOT = { has_global_flag = yunakshetra_restored }
	}
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = OPT_A_yunakshetra_restoration
		prestige = 500
		set_global_flag = yunakshetra_restored
		any_dynasty_member_even_if_dead = {
		    dynasty = 2040124 #Yukonama
		}
		dynasty = 2040124 #Yukonama
		if = { #New Imperial Bloodline.
			limit = { 
				has_dlc = "Holy Fury" 
				is_female = no
			}
			create_bloodline = {
				type = yunakshetra_bloodline
			}
			sound_effect = bloodline_added			
		}
    }
}
narrative_event = {
	id = indian_flavor.211
	title = TITLE_mumbai_triumphant
	desc = {
		text = EVTDESC_mumbai_triumphant
		trigger = {
			is_alternate_start = no
		}
	}
	picture = GFX_evt_mumbai_triumphant
	trigger = {
		has_landed_title = k_mumbai
		completely_controls = k_yunan
		NOT = { has_global_flag = mumbai_triumphant }
		NOT = { dynasty = 26560117 } #Desai
		culture = yoonaanee
	}
	mean_time_to_happen = {
		days = 1
	}
	option = {
		name = OPT_A_mumbai_triumphant
		prestige = 500
		set_global_flag = mumbai_triumphant
		#k_mumbai effectively replaces k_yunan
		k_yunan = {
		    any_direct_de_jure_vassal_title = {
			    de_jure_liege = k_mumbai
		    }
		}
		k_mumbai = {
            copy_title_history = k_yunan
			de_jure_liege = e_rajastan
		}
		#k_yunan is destroyed
		if = {
			limit = {
				OR = {
					has_landed_title = k_yunan
					k_yunan = { has_holder = no }
				}
			}
			k_yunan = { destroy_landed_title = THIS }
			activate_title = { title = k_yunan status = no }
		}
    }
}