decisions = {
	create_antioch = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 60

		potential = {
			NOT = {
				higher_tier_than = DUKE
			}
			has_landed_title = d_antioch
			religion = catholic
			k_antioch = {
				has_holder = no
			}
			k_antioch = {
				is_titular = yes
			}
			NOR = {
				has_alternate_start_setting = {
					setting = dejure
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random_including_duchies
				}
			}
		}
		allow = {
			is_adult = yes
			independent = yes
			war = no
			NOT = {
				trait = incapable
			}
			d_antioch = { show_scope_change = no province_completely_controls_trigger = yes }
			num_of_duke_titles >= 2
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				prestige = 1000
			}
			wealth = 100
		}
		effect = {
			wealth = -100
			primary_title = {
				save_event_target_as = current_primary_title
			}
			k_antioch = {
				show_scope_change = no
				grant_title = ROOT
				copy_title_laws = event_target:current_primary_title
			}
			d_antioch = {
				show_scope_change = no
				de_jure_liege = k_antioch
			}
			if = {
				limit = {
					has_landed_title = d_tripoli
				}
				d_tripoli = {
					show_scope_change = no
					de_jure_liege = k_antioch
				}
			}
			if = {
				limit = {
					has_landed_title = d_edessa
				}
				d_edessa = {
					show_scope_change = no
					de_jure_liege = k_antioch
				}
			}
			if = {
				limit = {
					has_landed_title = d_aleppo
				}
				d_aleppo = {
					show_scope_change = no
					de_jure_liege = k_antioch
				}
			}
			narrative_event = { id = HFP.40013 }
		}
	}

	create_kingdom_amalfi = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 120

		potential = {
			is_republic = yes
			has_landed_title = d_amalfi
			k_amalfi = {
				has_holder = no
			}
			NOT = {
				higher_tier_than = DUKE
			}
			k_amalfi = {
				is_titular = yes
			}
			NOR = {
				has_alternate_start_setting = {
					setting = dejure
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random_including_duchies
				}
			}
		}

		allow = {
			is_adult = yes
			independent = yes
			war = no
			num_of_duke_titles >= 2
			NOT = {
				trait = incapable
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				prestige = 500
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				wealth = 500
			}
			has_landed_title = c_amalfi
		}

		effect = {
			wealth = -500
			primary_title = {
				save_event_target_as = current_primary_title
			}
			c_amalfi = {
				show_scope_change = no
				de_jure_liege = d_amalfi 
			}
			d_amalfi = {
				show_scope_change = no
				de_jure_liege = k_amalfi
			}
			k_amalfi = {
				show_scope_change = no
				grant_title = ROOT
				copy_title_laws = event_target:current_primary_title
			}

			narrative_event = { id = HFP.40015 }
		}
	}

	create_kingdom_pisa = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 120

		potential = {
			is_republic = yes
			has_landed_title = d_pisa
			NOT = {
				higher_tier_than = DUKE
			}
			NOR = {
				has_alternate_start_setting = {
					setting = dejure
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random_including_duchies
				}
			}
			k_pisa = {
				has_holder = no
			}
			k_pisa = {
				is_titular = yes
			}
		}

		allow = {
			is_adult = yes
			independent = yes
			war = no
			num_of_duke_titles >= 2
			NOT = {
				trait = incapable
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				prestige = 500
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				wealth = 500
			}
			has_landed_title = c_pisa
			has_landed_title = c_piombino
		}

		effect = {
			wealth = -500
			primary_title = {
				save_event_target_as = current_primary_title
			}
			d_pisa = {
				show_scope_change = no
				de_jure_liege = k_pisa
			}
			k_pisa = {
				show_scope_change = no
				grant_title = ROOT
				copy_title_laws = event_target:current_primary_title
			}

			narrative_event = { id = HFP.40015 }
		}
	}

	create_kingdom_venice = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 120

		potential = {
			is_republic = yes
			has_landed_title = d_venice
			NOT = {
				higher_tier_than = DUKE
			}
			k_venice = {
				has_holder = no
			}
			k_venice = {
				is_titular = yes
			}
			NOR = {
				has_alternate_start_setting = {
					setting = dejure
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random_including_duchies
				}
			}
		}

		allow = {
			is_adult = yes
			independent = yes
			war = no
			num_of_duke_titles >= 2
			NOT = {
				trait = incapable
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				prestige = 500
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				wealth = 500
			}
			has_landed_title = c_venezia
		}

		effect = {
			wealth = -500
			primary_title = {
				save_event_target_as = current_primary_title
			}
			d_venice = {
				show_scope_change = no
				de_jure_liege = k_venice
			}
			k_venice = {
				show_scope_change = no
				grant_title = ROOT
				copy_title_laws = event_target:current_primary_title
			}

			narrative_event = { id = HFP.40015 }
		}
	}

	create_kingdom_genoa = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 120

		potential = {
			is_republic = yes
			has_landed_title = d_genoa
			NOT = {
				higher_tier_than = DUKE
			}			
			k_genoa = {
				has_holder = no
			}
			k_genoa = {
				is_titular = yes
			}
			NOR = {
				has_alternate_start_setting = {
					setting = dejure
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random
				}
				has_alternate_start_setting = {
					setting = title_names
					value = random_including_duchies
				}
			}
		}

		allow = {
			is_adult = yes
			independent = yes
			war = no
			num_of_duke_titles >= 2
			NOT = {
				trait = incapable
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				prestige = 500
			}
			conditional_tooltip = {
				trigger = {
					ai = no
				}

				wealth = 500
			}
			has_landed_title = c_genoa
		}

		effect = {
			wealth = -500
			primary_title = {
				save_event_target_as = current_primary_title
			}
			d_genoa = {
				show_scope_change = no
				de_jure_liege = k_genoa
			}
			k_genoa = {
				show_scope_change = no
				grant_title = ROOT
				copy_title_laws = event_target:current_primary_title
			}

			narrative_event = { id = HFP.40015 }
		}
	}


	form_the_outremer = {
		is_high_prio = yes
		only_playable = yes
		ai = no

		potential = {
			OR = {
				religion = catholic
				religion = fraticelli
			}
			any_demesne_title = {
				OR = {
					tier = KING
					tier = EMPEROR
				}
				region = world_middle_east
			}
			NOR = {
				has_landed_title = e_byzantium
				has_landed_title = e_roman_empire
				has_landed_title = e_hre
			}
			e_outremer = {
				is_titular = yes
			}
			e_outremer = {
				has_holder = no
			}
			is_alternate_start = no
		}

		allow = {
			is_adult = yes
			independent = yes
			war = no
			prestige = 5000
			custom_tooltip = {
				text = owns_jerusalem_tt
				has_landed_title = c_jerusalem
			}
			custom_tooltip = {
				text = completely_control_near_east_TT

				completely_controls_region = world_middle_east
			}
		}

		effect = {
			hidden_tooltip = {
				primary_title = {
					e_outremer = {
						copy_title_laws = PREV
						copy_title_history = PREV
					}
				}
			}

			custom_tooltip = {
				text = create_outremer_tt
				grant_title_no_opinion = e_outremer 
			}
			if = {
				limit = {
					OR = {
						d_shiite = {
							has_holder = yes
						}
						d_sunni = {
							has_holder = yes
						}
						d_ibadi = {
							has_holder = yes
						}
						d_kharijite = {
							has_holder = yes
						}
						d_yazidi = {
							has_holder = yes
						}
						d_hurufi = {
							has_holder = yes
						}
					}
				}

				custom_tooltip = {
					text = destroy_muslim_leadership

					destroy_landed_title = d_shiite
					destroy_landed_title = d_sunni
					destroy_landed_title = d_ibadi
					destroy_landed_title = d_kharijite
					destroy_landed_title = d_hurufi
				}
			}

			hidden_tooltip = {

				any_demesne_title = {
					limit = {
						tier = EMPEROR
						NOT = { title = e_outremer }
					}
					destroy_landed_title = THIS
				}

				capital = c_jerusalem

				any_landed_title = {
					limit = {
						tier = KING
						region = world_middle_east
					}
					de_jure_liege = e_outremer
				}
				if = {
					limit = {
						k_egypt = { show_scope_change = no province_completely_controls_trigger = yes } 
					}
					k_egypt = {
						de_jure_liege = e_outremer
					}
				}

				ROOT = {
					narrative_event = { id = HFP.40027 }
				}
				any_playable_ruler = {
					narrative_event = { id = HFP.40027 }
				}

				set_global_flag = destroyed_caliphates
				
				if = {
					limit = {
						ai = no
					}
					set_character_flag = achievement_deus_vult
				}
			}
		}
	}
	
	ai_claim_county_if_baron = {
		is_high_prio = yes
		only_playable = yes
		ai_check_interval = 36

		potential = {
			ai = yes
			war = no
			is_landed = yes
			higher_tier_than = COUNT
			is_merchant_republic = no
			NOT = { is_patrician = yes }
			NOT = {
				any_demesne_title = {
					tier = COUNT
				}
			}
			any_vassal = {
				ai = yes
				any_demesne_title = {
					tier = COUNT
				}
			}
		}

		allow = {
			
		}

		effect = {
			random_vassal = {
				limit = {
					ai = yes
					any_demesne_title = {
						tier = COUNT
					}
				}
				random_demesne_title = {
					limit = {
						tier = COUNT
					}
					preferred_limit = {
						location = {
							is_capital = no
						}
					}
					usurp_title = FROM
				}
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
		}
	}
}