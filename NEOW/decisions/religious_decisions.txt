###########################################
#
# Religious Decisions for Sons of Abraham
#
###########################################
# Written by Henrik Fåhraeus
###########################################

decisions = {

	neovedantic_artifact_search = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 60 #check only once every 60 months.
		potential = {
			religion = neovedantic
			NOT = {
				any_artifact = {
					has_artifact_flag = very_rare
				}
			}
			is_landed = yes
			mercenary = no
			holy_order = no
			prisoner = no
			has_regent = no
			OR = {
				higher_tier_than = COUNT
				ai = no
			}
			any_courtier_or_vassal = {
				NOT = { trait = incapable }
				prisoner = no
				opinion = { who = ROOT value = 20 }
				is_councillor = yes
				ai = yes
			}
			NOR = {
				has_character_modifier = relic_rumor_major
				has_character_modifier = relic_rumor_medium
				has_character_modifier = relic_rumor_minor
			}
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		allow = {
			piety = 250
		}
		effect = {
			piety = -250
			custom_tooltip = {
				text = neovedantic_artifact_search_tt
				random_courtier_or_vassal = {
					limit = {
						NOT = { trait = incapable }
						prisoner = no
						opinion = { who = ROOT value = 20 }
						is_councillor = yes
						ai = yes
					}
					save_event_target_as = rumor_councillor
				}
				save_event_target_as = relic_ruler
				event_target:rumor_councillor = { character_event = { id = MNM.9001 } }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			modifier = {
				factor = 0
				wealth < 0
			}
			modifier = {
				factor = 0.2
				war = yes
			}
		}
	}
	abdicate_gaelic = {
		only_playable = yes
		potential = {
			is_ruler = yes
			prisoner = no
			has_character_modifier = unfit_gaelic_king
			NOT = { has_character_flag = do_not_abdicate_twice }
		}
		allow = {
			war = no
			any_demesne_title = {
				NOT = { higher_tier_than = count }
				is_occupied = no
			}
			prisoner = no
		}
		effect = {
			set_character_flag = do_not_abdicate_twice
			custom_tooltip = {
				text = gaelic_abdication
				any_vassal = {
					limit = { among_most_powerful_vassals = 5 }

					ROOT = {
						primary_title = {
							add_weak_claim = PREVPREV
						}
					}
				}
				abdicate = yes
			}
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0
				NOT = {
					scaled_wealth = 2.0
				}
			}
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0
				trait = paranoid
			}
			modifier = {
				factor = 0
				trait = proud
			}
			modifier = {
				factor = 0
				trait = ambitious
			}
		}
	}
	give_offerings_sidhe = {
		only_playable = yes
		is_high_prio = yes
		potential = {
			has_dlc = "The Old Gods"
			is_ruler = yes
			age = 16
			prisoner = no
			OR = {
				religion = celtic_pagan
				religion = celtic_pagan_reformed
			}
			NOT = { has_religion_feature = religion_dogmatic }
			NOR = {
				has_character_modifier = sidhe_offerings_bad
				has_character_modifier = sidhe_offerings_neutral
				has_character_modifier = sidhe_offerings_good
				has_character_flag = sidhe_offerings_giving
			}
		}
		allow = {
			war = no
			any_demesne_title = {
				location = {
					any_province_holding = { is_occupied = no }
				}
			}
			any_courtier = {
				has_job_title = job_spiritual
			}
			scaled_wealth = 0.30
			prisoner = no
		}
		effect = {
			custom_tooltip = {
				text = prepare_offerings
				scaled_wealth = -0.15
				set_character_flag = sidhe_offerings_giving
				hidden_tooltip = {
					character_event = { id = celtic.248 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			
			modifier = {
				factor = 0
				NOT = {
					scaled_wealth = 1.0
				}
			}
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0
				trait = paranoid
			}
		}
	}
	commune_with_shadow = {
		only_playable = yes
		is_high_prio = yes
		potential = {
			age = 16
			prisoner = no
			piety = 500
			OR = {
				religion = nousthreskeia
				religion = nousthreskeia_reformed
			}
		}
		allow = {
			NOR = {
				trait = content
				trait = ambitious
				trait = communed_with_shadow
			}
			piety = 2000
			war = no
			wealth = 200
			prisoner = no
		}
		effect = {
			wealth = -200
			piety = -2000
			hidden_tooltip = {
				character_event = { id = razumist.1 }
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 0
				trait = craven
			}
			modifier = {
				factor = 0
				trait = paranoid
			}
		}
	}
	become_mystic = {
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			age = 16
			prisoner = no
			is_incapable = no
			OR = {
				religion = sufi
				religion = barelvi
				religion = ramadi
				religion = syafi
				religion = alevi
				religion = akjang
				religion = yazidi
				religion = yersenism
				religion = malikite
			}
		}
		allow = {
			NOT = {
				OR = {
				trait = zealous
				trait = mystic
				}
			}
			OR = {
				learning = 15
				trait = erudite
				trait = martial_cleric
				trait = scholarly_theologian
				trait = mastermind_theologian
			}
			piety = 500
			war = no
			prisoner = no
			is_incapable = no
		}
		effect = {
			piety = -500
			add_trait = mystic
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
			modifier = {
				factor = 0
				trait = cynical
			}
		}
	}
	practice_muraqbah = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			OR = {
				religion = sufi
				religion = barelvi
				religion = alevi
				religion = yazidi
				religion = yersenism
				religion = pusaka
				religion = ramadi
				religion = syafi
			}
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_adult = yes
			NOT = {
				has_character_flag = practiced_muraqbah
			}
		}
		allow = {
			piety = 100
			NOT = { trait = cynical }
		}
		effect = {
			piety = -100
			set_character_flag = practiced_muraqbah
			character_event = { id = sufist.1 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
			}
			modifier = {
				factor = 1.25
				OR = {
					trait = lustful
					trait = gluttonous
					trait = greedy
					trait = slothful
					trait = wroth
					trait = envious
					trait = proud
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = scholar
			}
		}
	}
	go_fishing = {
		only_playable = yes
		ai_check_interval = 48 #check only once every 48 months.
		potential = {
			OR = {
				religion = vagarna
				religion = finnish_pagan
				religion = finnish_pagan_reformed
				religion = starist_pagan
				religion = starist_pagan_reformed
				religion = folklorist
				religion = folklorist_reformed
				religion = inuit_pagan
				religion = inuit_pagan_reformed
			}
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_adult = yes
			NOT = {
				has_character_flag = fishing_currently_flag
			}
		}
		allow = {
			wealth = 1
		}
		effect = {
			wealth = -1
			set_character_flag = fishing_currently_flag
			character_event = { id = kalevalalaulu.1000 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.5
			}
		}
	}
	trinity_claim_to_be_son = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			religion = alawite
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_female = no
			NOR = {
				has_global_flag = alawite_trinity_son_found
				has_character_flag = not_the_son
			}
		}
		allow = {
			piety = 1000
			prestige = 1000
			NOR = {
				trait = greedy
				trait = gluttonous
				trait = lustful
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
			}
			diplomacy = 15
			NOT = { trait = excommunicated }
			NOT = { government = theocracy_government }
		}
		effect = {
			piety = -1000
			prestige = -1000
			character_event = { id = Atrinity.1 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 1.25
				OR = {
					trait = chaste
					trait = temperate
					trait = charitable
					trait = diligent
					trait = kind
					trait = patient
					trait = humble
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = scholar
			}
			modifier = {
				factor = 1.25
				trait = gregarious
			}
			modifier = {
				factor = 1.25
				trait = honest
			}
		}
	}
	trinity_claim_to_be_father = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			religion = alawite
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_female = no
			NOR = {
				has_global_flag = alawite_trinity_father_found
				has_character_flag = not_the_father
			}
		}
		allow = {
			piety = 1000
			prestige = 1000
			NOR = {
				trait = greedy
				trait = gluttonous
				trait = lustful
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
			}
			martial = 15
			NOT = { trait = excommunicated }
			NOT = { government = theocracy_government }
		}
		effect = {
			piety = -1000
			prestige = -1000
			character_event = { id = Atrinity.4 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 1.25
				OR = {
					trait = chaste
					trait = temperate
					trait = charitable
					trait = diligent
					trait = kind
					trait = patient
					trait = humble
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = scholar
			}
			modifier = {
				factor = 1.25
				trait = brave
			}
			modifier = {
				factor = 1.25
				trait = just
			}
		}
	}
	trinity_claim_to_be_spirit = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			religion = alawite
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_female = no
			NOR = {
				has_global_flag = alawite_trinity_spirit_found
				has_character_flag = not_the_spirit
			}
		}
		allow = {
			piety = 1000
			prestige = 1000
			NOR = {
				trait = greedy
				trait = gluttonous
				trait = lustful
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
			}
			learning = 15
			NOT = { trait = excommunicated }
			NOT = { government = theocracy_government }
		}
		effect = {
			piety = -1000
			prestige = -1000
			character_event = { id = Atrinity.7 }
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 1.25
				OR = {
					trait = chaste
					trait = temperate
					trait = charitable
					trait = diligent
					trait = kind
					trait = patient
					trait = humble
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = scholar
			}
			modifier = {
				factor = 1.25
				trait = zealous
			}
			modifier = {
				factor = 1.25
				trait = content
			}
		}
	}
	trinity_merge_bloodlines = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			religion = alawite
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
			is_female = no
			has_global_flag = alawite_trinity_son_found
			has_global_flag = alawite_trinity_father_found
			has_global_flag = alawite_trinity_spirit_found
			NOT = {
				has_global_flag = alawite_trinity_full_formed
			}
		}
		allow = {
			NOR = {
				trait = greedy
				trait = gluttonous
				trait = lustful
				trait = slothful
				trait = envious
				trait = wroth
				trait = proud
			}
			piety = 500
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_the_son
				bloodline_is_active_for = PREV
			}
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_the_father
				bloodline_is_active_for = PREV
			}
			any_owned_bloodline = {
				has_bloodline_flag = bloodline_the_spirit
				bloodline_is_active_for = PREV
			}
			NOT = { trait = excommunicated }
			NOT = { government = theocracy_government }
		}
		effect = {
			piety = -500
			set_global_flag = alawite_trinity_full_formed
			create_bloodline = {
				type = trinity_full
			}
			random_owned_bloodline = {
				limit = { 
					has_bloodline_flag = bloodline_the_son
				}
				destroy_bloodline = yes
			}
			random_owned_bloodline = {
				limit = { 
					has_bloodline_flag = bloodline_the_father
				}
				destroy_bloodline = yes
			}
			random_owned_bloodline = {
				limit = { 
					has_bloodline_flag = bloodline_the_spirit
				}
				destroy_bloodline = yes
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 1.25
				OR = {
					trait = chaste
					trait = temperate
					trait = charitable
					trait = diligent
					trait = kind
					trait = patient
					trait = humble
				}
			}
			modifier = {
				factor = 1.25
				trait = mystic
			}
			modifier = {
				factor = 1.25
				trait = scholar
			}
		}
	}
	donate_to_clergy = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24 #check only once every 24 months.
		potential = {
			OR = {
				religion_group = zoroastrian_group
				religion_group = muslim
				religion_group = jewish_group
				religion_group = buddhist_group
				religion_group = christian
				religion = druze
				religion = alawite
				religion = mandaeanism
				religion = nousthreskeia_reformed
				religion = orange_king
				religion = summer_queen
				religion = thelemic_reformed
				religion = theosophy
				religion = parabrahmanist
				religion = kalikula
				religion = shaivasiddhanta
				religion = sikh
				religion = neovedantic
				religion = jain
				religion = bon_reformed
				religion = donyipolo
				religion = kiratist
				religion = baltic_pagan_reformed
				religion = celtic_pagan_reformed
				religion = inuit_pagan_reformed
				religion = lakefolk_pagan_reformed
				religion = finnish_pagan_reformed
				religion = starist_pagan_reformed
				religion = maunaxite_reformed
				religion = hellenic_pagan_reformed
				religion = constitutional
				christian_syncretic_religion = yes
				muslim_syncretic_religion = yes
			}
			NOT = { trait = incapable }
			NOT = { trait = infirm }
			prisoner = no
			has_regent = no
		}
		allow = {
			wealth = 1000
			piety = 200
			NOT = { trait = excommunicated }
			NOT = { government = theocracy_government }
		}
		effect = {
			piety = 250
			religion_authority = {
				modifier = donated_clergy
				years = 5
			}
			wealth = -1000
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.1
			}
			modifier = {
				factor = 0.5
				trait = greedy
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 2
				trait = charitable
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 5
				religion = fraticelli
			}
			modifier = {
				factor = 0
				religion_authority > 60
			}
			modifier = {
				factor = 0.25
				religion_authority > 50
			}
			modifier = {
				factor = 0.5
				religion_authority > 40
			}
			modifier = {
				factor = 2
				religion_authority < 30
			}
			modifier = {
				factor = 2
				religion_authority < 20
			}
			modifier = {
				factor = 2
				religion_authority < 10
			}
		}
	}
	
	chaldean_catholic_reunion = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 60 #check only once every 60 months.
		potential = {
			religion = chaldean
			religion_authority < 0.5
			OR = {
				independent = yes
				NOT = {
					any_liege = {
						religion = ROOT
					}
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			k_papacy = {
				show_scope_change = no
				holder_scope = {
					show_scope_change = no
					ROOT = {
						show_scope_change = no
						PREV = {
							religion_authority >= 0.5
							opinion = {
								who = ROOT
								value >= 25
							}
							reverse_opinion = {
								who = ROOT
								value >= 25
							}
						}
					}
				}
			}
			prestige = 250
			NOR = {
				trait = zealous
				trait = cynical
			}
		}
		effect = {
			set_global_flag = chaldean_catholic_reunion_flag
			prestige = -250
			piety = 100
			religion_authority = {
				modifier = ruler_converted_from
				years = 20
			}
			set_parent_religion = { religion = chaldean parent = catholic }
			religion = catholic
			k_papacy = {
				show_scope_change = no
				holder_scope = {
					show_scope_change = no
					religion_authority = {
						modifier = ruler_converted_to
						years = 20
					}
					opinion = {
						modifier = opinion_chaldean_converted
						who = ROOT
						years = 20
					}
				}
			}
		}
		ai_will_do = {
			factor = 0.01
			modifier = {
				factor = 2
				religion_authority < 30
			}
			modifier = {
				factor = 2
				religion_authority < 10
			}
		}
	}
	

	secret_romuva_decision = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 400 #check only once every 400 months.
		potential = {
			has_dlc = "The Old Gods"
			is_adult = yes
			prisoner = no
			has_regent = no
			is_heretic = no #Must belong to a dominant denomination of the faith.
			OR = {
				culture_group = baltic 
				culture = kaliningrader
			}
			OR = { #Must be eccentric or crazy or a hunter, wilderness guy
				trait = lunatic 
				trait = possessed
				trait = hunter
				trait = mystic
				has_focus = focus_hunting
			} 
			OR = { #Must control a Romuva Holy Site
				completely_controls = c_podlasie
				completely_controls = c_powisle
				completely_controls = c_riga
				completely_controls = c_rugen
				completely_controls = c_bryansk
			} 
			NOR = { #Must not have used this decision or be a Romuva already.
				is_theocracy = yes
				religion = baltic_pagan
				religion = baltic_pagan_reformed
				secret_religion = baltic_pagan
				secret_religion = baltic_pagan_reformed
				has_character_flag = flag_delving_into_romuva
				has_global_flag = baltic_resurgence #No point in secrecy, there are other ways to convert.
			}
			capital_scope = { #Court must also be localized in Italy or Greece.
				region = world_europe_east
			}
		}
		
		allow = {
			prisoner = no
			NOT = { trait = incapable }
		}
		
		effect = {
			hidden_tooltip = {
				set_character_flag = flag_delving_into_classics
				character_event = { id = romuva.1 }
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = zealous
			}
		}
	}
	begin_baltic_resurgence = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 400 #check only once every 400 months.
		potential = {
			has_dlc = "The Old Gods"
			NOT = {
				has_global_flag = baltic_resurgence
			}
			is_adult = yes
			is_heretic = no #Must belong to a dominant denomination of the faith.
			culture_group = baltic 
			has_landed_title = k_lithuania
			OR = {
				religion = baltic_pagan
				religion = baltic_pagan_reformed
			}
			prisoner = no
			has_regent = no
		}
		
		allow = {
			prisoner = no
			NOT = { trait = incapable }
			OR = {
				d_baltic_pagan_reformed = {
					has_holder = yes
				}
				AND = {
					prestige = 3000
					piety = 1000
				}
				realm_size = 120
			}
		}
		
		effect = {
			custom_tooltip = { text = baltic_resurgence_tt }
		
			hidden_tooltip = {
				set_global_flag = baltic_resurgence #enables conversion to Romuva via holy site
				narrative_event = { id = romuva.6 }
				set_global_flag = flag_restored_baltic_lodge
				join_society = warrior_lodge_baltic
				set_society_grandmaster = yes # Set character as Grand Master
				add_society_currency_massive_effect = yes
					create_random_soldier = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = no
						age = 16
					}
					new_character = { join_society = warrior_lodge_baltic }
					create_random_soldier = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = no
						age = 18
					}
					new_character = { join_society = warrior_lodge_baltic }
					create_random_soldier = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = no
						age = 20
					}
					new_character = { join_society = warrior_lodge_baltic }
					create_random_priest = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = yes
						age = 25
					}
					new_character = { join_society = warrior_lodge_baltic }
					create_random_soldier = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = yes
						age = 26
					}
					new_character = { join_society = warrior_lodge_baltic }
					create_random_soldier = {
						random_traits = yes
						dynasty = random
						religion = ROOT
						culture = ROOT
						attributes = {
							martial = 10
						}
						female = no
						age = 28
					}
					new_character = { join_society = warrior_lodge_baltic }
				any_vassal = {
					limit = {
						ai = yes
						can_join_society = warrior_lodge_baltic
					}
					join_society = warrior_lodge_baltic
				}
				any_independent_ruler = {
					limit = {
						ai = yes
						can_join_society = warrior_lodge_baltic
						is_within_diplo_range = ROOT
					}
					random = { chance = 35 join_society = warrior_lodge_baltic }
				}
		  }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}	

	form_mongol_empire = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			religion = khanist
			form_kingdom_potential = yes
			e_khanist = {
				has_holder = no
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			OR = {
				num_of_holy_sites = 3
				AND = {
					num_of_holy_sites = 1
					num_of_count_titles_in_realm = 40
				}
			}
		}
		effect = {
			if = {
				limit = {
					is_female = yes
					has_dlc = "Holy Fury"
				}
				create_bloodline = {
					type = great_khanist_female
				}
				new_bloodline = {
					set_description = "bloodline_desc_great_khanist"
				}
			}
			if = {
				limit = {
					is_female = no
					has_dlc = "Holy Fury"
				}
				create_bloodline = {
					type = great_khanist_male
				}
				new_bloodline = {
					set_description = "bloodline_desc_great_khanist"
				}
			}
			hidden_tooltip = {
				e_khanist = {
					gain_empire_effect = yes
				}
				narrative_event = { id = khanist.1 }
			}
		}
	}

	build_chariot = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			OR = {
				religion = ironist
				any_owned_bloodline = {
					has_bloodline_flag = bloodline_chariots
				}
			}
			NOT = {
				has_character_flag = built_chariot
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			wealth = 150
		}
		effect = {
			narrative_event = { id = ironist.1 }
			set_character_flag = built_chariot
		}
	}

	xianxia_training = {
		is_high_prio = yes
		ai_check_interval = 12
		
		potential = {
			religion = xianxia
			war = no
			in_command = no
			prisoner = no
			is_incapable = no
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		allow = {
			prestige = 100
			wealth = 50
		}
		effect = {
			prestige = -100
			wealth = -50
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 120 hidden = yes} }
			add_trait = training
			random_list = {
				50 = {
					long_character_event = { id = xianxia.15 days = 30 random = 2 }
				}
				15 = {
					long_character_event = { id = xianxia.25 days = 30 random = 2 }
				}
				5 = {
					long_character_event = { id = xianxia.35 days = 30 random = 2 }
				}
				20 = {
					long_character_event = { id = xianxia.45 days = 30 random = 2 }
				}
				5 = {
					long_character_event = { id = xianxia.55 days = 30 random = 2 }
				}
				4 = {
					long_character_event = { id = xianxia.65 days = 30 random = 2 }
				}
				1 = {
					mult_modifier = {
						factor = 0
						trait = duelist
					}
					long_character_event = { id = xianxia.75 days = 30 random = 2 }
				}
			}
			random_list = {
				12 = {#The waterfall
					long_character_event = { id = xianxia.5 days = 10 random = 2 }
				}
				11 = {#good gains
					long_character_event = { id = xianxia.6 days = 10 random = 2 }
				}
				11 = {#bad gains
					long_character_event = { id = xianxia.7 days = 10 random = 2 }
				}
				11 = {#night med
					long_character_event = { id = xianxia.10 days = 10 random = 2 }
				}
				11 = {#sun med
					mult_modifier = {
						factor = 0
						NOR = {
							month == 5
							month == 6
							month == 7
						}
					}
					long_character_event = { id = xianxia.11 days = 10 random = 2 }
				}
				11 = {#snow med
					mult_modifier = {
						factor = 0
						NOR = {
							month == 0
							month == 1
							month == 11
						}
					}
					long_character_event = { id = xianxia.12 days = 10 random = 2 }
				}
				11 = {#traveller
					mult_modifier = {
						factor = 0.05
					}
					long_character_event = { id = xianxia.13 days = 10 random = 2 }
				}
				11 = {#The Xian
					mult_modifier = {
						factor = 0.05
					}
					mult_modifier = {
						factor = 0
						NOR = { 
							combat_rating = 100
							health = 10
							any_kill_list_character = {
								limit = {
									OR = {
										death_reason = death_duel
										death_reason = death_mission_duel
										death_reason = death_battle_duel
										death_reason = death_legendary_fail_duel
										death_reason = death_legendary_win_duel
										death_reason = death_claim_duel_attacker
										death_reason = death_claim_duel_defender
									}
								}
								count = 50
							}
						}
					}
					mult_modifier = {
						factor = 0
						trait = immortal
					}
					long_character_event = { id = xianxia.14 days = 10 random = 2 }
				}
				11 = {#path of strength
					mult_modifier = {
						factor = 0
						NOT = { trait = feeble }
					}
					mult_modifier = {
						factor = 0
						NOT = { trait = weak }
					}
					mult_modifier = {
						factor = 0
						NOR = {
							trait = flu
							trait = dysentery
							trait = gout
							trait = food_poisoning
							trait = rabies
							trait = cancer
							trait = has_aztec_disease
							trait = dancing_plague
							trait = scurvy
							trait = pneumonic
							trait = syphilitic
							trait = leper
							trait = has_tuberculosis
							trait = has_typhoid_fever
							trait = has_typhus
							trait = has_measles
							trait = has_small_pox
						}
					}
					mult_modifier = {
						factor = 0
						trait = immortal
					}
					long_character_event = { id = xianxia.16 days = 10 random = 2 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.85
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	wuxia_training = {
		is_high_prio = yes
		ai_check_interval = 3
		
		potential = {
			religion = wuxia
			OR = {
				trait = wuxia_apprentice
				trait = wuxia_expert
				trait = wuxia_master
				trait = wuxia_grandmaster
			}
			has_character_flag = wuxia_flag_set
			war = no
			prisoner = no
			is_incapable = no
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		allow = {
			prestige = 100
			wealth = 50
		}
		effect = {
			prestige = -100
			wealth = -50
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 180 hidden = yes} }
			change_variable = { which = wuxia_training_progress value = 1 }
			if = {
				limit = {
					check_variable = { which = wuxia_training_progress value == 10 }
					trait = wuxia_apprentice
				}
				remove_trait = wuxia_apprentice
				add_trait = wuxia_expert
			}
			else_if = {
				limit = {
					check_variable = { which = wuxia_training_progress value == 20 }
					trait = wuxia_expert
				}
				remove_trait = wuxia_expert
				add_trait = wuxia_master
			}
			else_if = {
				limit = {
					check_variable = { which = wuxia_training_progress value == 30 }
					trait = wuxia_master
				}
				remove_trait = wuxia_master
				add_trait = wuxia_grandmaster
			}
			else = {
			}
			add_trait = training
			long_character_event = { id = wuxia.3 days = 30 }
			random_list = {
				10 = {#sect friend
					long_character_event = { id = wuxia.4 days = 10 random = 2 }
				}
				10 = {#rival sect
					long_character_event = { id = wuxia.5 days = 10 random = 2 }
				}
				10 = {#good gains
					mult_modifier = {
						factor = 0
						NOR = {
							check_variable = { which = wuxia_training_progress value == 10 }
							check_variable = { which = wuxia_training_progress value == 20 }
							check_variable = { which = wuxia_training_progress value == 30 }
						}
					}
					long_character_event = { id = wuxia.6 days = 10 random = 2 }
				}
				10 = {#bad gains
					mult_modifier = {
						factor = 0
						NOR = {
							check_variable = { which = wuxia_training_progress value == 10 }
							check_variable = { which = wuxia_training_progress value == 20 }
							check_variable = { which = wuxia_training_progress value == 30 }
						}
					}
					long_character_event = { id = wuxia.7 days = 10 random = 2 }
				}
				10 = {#too fat
					mult_modifier = {
						factor = 0
						NOR = {
							trait = is_fat
							trait = gluttonous
						}
					}
					long_character_event = { id = wuxia.8 days = 10 random = 2 }
				}
				10 = {#too thin
					mult_modifier = {
						factor = 0
						NOT = {
							trait = is_malnourished
						}
					}
					long_character_event = { id = wuxia.9 days = 10 random = 2 }
				}
				10 = {#night med
					long_character_event = { id = wuxia.10 days = 10 random = 2 }
				}
				10 = {#sun med
					mult_modifier = {
						factor = 0
						NOR = {
							month == 5
							month == 6
							month == 7
						}
					}
					long_character_event = { id = wuxia.11 days = 10 random = 2 }
				}
				10 = {#snow med
					mult_modifier = {
						factor = 0
						NOR = {
							month == 0
							month == 1
							month == 11
						}
					}
					long_character_event = { id = wuxia.12 days = 10 random = 2 }
				}
				10 = {#traveller
					mult_modifier = {
						factor = 0.05
					}
					long_character_event = { id = wuxia.13 days = 10 random = 2 }
				}
			}
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.8
			}
			modifier = {
				factor = 2
				trait = zealous
			}
			modifier = {
				factor = 2
				trait = diligent
			}
			modifier = {
				factor = 2
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = slothful
			}
			modifier = {
				factor = 0.5
				trait = cynical
			}
			modifier = {
				factor = 0.5
				trait = content
			}
		}
	}
	study_era_law = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 12
		
		potential = {
			religion = legalist
			NOR = {
				trait = trained_imperial_law
				trait = trained_republican_law
				trait = trained_ccp_law
				trait = travelling
			}
			war = no
			prisoner = no
			is_incapable = no
		}
		allow = {
			piety = 50
		}
		effect = {
			piety = -50
			add_trait = travelling
			character_event = { id = legalism.3 days = 180 }
			random_list = {
				33 = {
					character_event = { id = legalism.4 days = 90 random = 30 }
				}
				33 = {
					character_event = { id = legalism.5 days = 90 random = 30 }
				}
				33 = {
					character_event = { id = legalism.6 days = 90 random = 30 }
				}
				1 = {
				}
			}
		}
	}
	comission_new_stamp = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 12
		
		potential = {
			religion = legalist
			higher_tier_than = COUNT
			NOT = {
				any_artifact = {
					has_artifact_flag = chinese_stamp
				}
			}
			war = no
			prisoner = no
			is_incapable = no
		}
		allow = {
			piety = 250
			wealth = 250
		}
		effect = {
			piety = -250
			wealth = -250
			add_artifact = chinese_stamp
		}
	}
	send_neeraji_mission = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			has_quest = quest_neeraji_mission
		}
		allow = {
			piety = 20
		}
		effect = {
			narrative_event = { id = jain.8 }
		}
	}

	celebrate_stalinmas = {
		only_playable = yes
		ai_check_interval = 2

		potential = {
			is_playable = yes
			  OR = {
                is_feudal = yes
                is_tribal = yes
                is_nomadic = yes
            }
			prisoner = no
			has_regent = no
			religion = stalinist
			NOT = {	has_character_modifier = celebrated_stalinmas }
		}
		allow = {
			war = no
			custom_tooltip = {
				text = UNOCCUPIED_DEMESNE_TITLE
				hidden_tooltip = {
					any_demesne_title = {
						NOT = { higher_tier_than = count }
						is_occupied = no
					}
				}
			}
			month = 11
			wealth = 100
			prisoner = no
			NOT = { is_inaccessible_trigger = yes }
			custom_tooltip = {
				text = is_not_busy_trigger_tooltip
				hidden_tooltip = { NOT = { has_character_flag = do_not_disturb } }
			}
		}
		effect = {
			add_character_modifier = {
				name = celebrated_stalinmas
				duration = 364
				hidden = yes
			}			
			set_character_flag = recent_minor_decision
			set_character_flag = do_not_disturb
			hidden_tooltip = { character_event = { id = 36999 days = 150 } } # Safety catch flag clearing
			hidden_tooltip = { 
				character_event = { id = stalinmas.1  }
			}
			if = {
				limit = {
					has_dlc = "Reapers"
				}
				custom_tooltip = {
					text = capital_prospers_custom_tooltip
					hidden_tooltip = {
						capital_scope = {
							change_variable = { which = prosperity_value value = 8 }
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			
			
			modifier = {
				factor = 0
				has_character_flag = recent_minor_decision
				NOT = {
					had_character_flag = {
						flag = recent_minor_decision
						days = 730
					}
				}
			}
		}
	}

	nobelian_go_north_quest = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 4
				}
			}
			trait = immortal
			has_character_flag = dreams_of_the_north
			NOR = {
				has_character_flag = abandoned_the_north
				has_character_flag = north_in_progress				
			}	
			prisoner = no
			has_regent = no			
		}
		allow = {
		}
		effect = {
			if = {
				limit = {
					ROOT = {
						NOT = {
								has_character_flag = started_north_quest
						}
					}
				}
				set_character_flag = started_north_quest
				set_variable = { which = ascension_progress value = 1}
			}
			else = {
				ROOT  = {
					change_variable = {	which = ascension_progress value = 1 }
				}
			}
			character_event = { id = nobelian.1234 }
		}			
	}
	THE_THRESHOLD = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			religion = vagarna
			trait = old_lore
			trait = immortal
			has_character_flag = dreams_of_the_north
			trait = literally_heartless
			NOT = {
				has_character_flag = abandoned_the_north				
			}
		}
		allow = {
			OR = {
				any_vassal = { has_landed_title = c_jan_mayen }
				has_landed_title = c_jan_mayen
				trait = lunatic
		}				
		}
		effect = {
			character_event = { id = nobelian.7777 }
		}			
	}
	TURN_AWAY_SAVE_YOURSELF = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			has_character_flag = dreams_of_the_north
		}
		allow = {
			NOT = {
				trait = literally_heartless
			}
		}
		effect = {
			character_event = { id = nobelian.9999 }				
		}
	}
		
	nobelian_legendary_discovery = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 4
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {	
			piety = -50
			character_event = { id = nobelian.21 }
		}
	}
		
	nobelian_search_the_continent = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 1
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			NOT = {
				has_character_modifier = recently_searched_nobelian
			}
		}
		effect = {
			add_character_modifier = {
				name = recently_searched_nobelian
				duration = 365
				hidden = yes
			}				
			character_event = { id = nobelian.9 }
		}		
	}

	nobelian_dive_occult = {
		only_playable = yes
		is_high_prio = yes
		ai_check_interval = 24
		
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 1
				}
			}
		}
		allow = {
			NOR = {
				has_character_modifier = recently_dove_into_occult_nobelian
				any_artifact = {
					artifact_type = mystic_insight
					count = 3
				}		
			}
		}
		effect = {
				add_character_modifier = {
					name = recently_dove_into_occult_nobelian
					duration = 365
					hidden = yes
				}				
				character_event = { id = nobelian.1 }
		}
	}

	balkaner_secret_religion = {
		
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			NOR = {
				has_global_flag = yugoslavism_triumphant
				has_global_flag = yugoslavism_survives
				has_global_flag = yugoslavism_dead
				has_secret_religion = yes
				has_landed_title = e_yugoslavia
			}
			religion = jugoslavist
			age = 12
		}
		
		allow = {
			NOR = {
				trait = content
				trait = cynical
				trait = zealous
				trait = idolizer
			}
		}
		
		effect = {
			if = {
				limit = {
					OR = {
						culture = croatian
						culture = slovenian
					}
				}
				set_secret_religion = catholic
			}
			else_if = {
				limit = {
						culture = bosnian
				}
				set_secret_religion = sunni
			}
			else_if = {
				limit = {
					OR = {
						culture = serbian
						culture = bulgarian
					}
				}
				set_secret_religion = orthodox
			}
			else = {
				random_list = {
					40 = {
						set_secret_religion = catholic
					}
					40 = {
						set_secret_religion = orthodox
					}
					20 = {
						set_secret_religion = sunni
					}
				}
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.05#This becomes more and more likely the lower Yugoslavist MA is, starts at 5% chance
			modifier = {#7.5%
				factor = 1.5
				NOT = {
					religion_authority = 0.7 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#11%
				factor = 1.5
				NOT = {
					religion_authority = 0.6 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#17%
				factor = 1.5
				NOT = {
					religion_authority = 0.5 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#25%
				factor = 1.5
				NOT = {
					religion_authority = 0.4 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#38%
				factor = 1.5
				NOT = {
					religion_authority = 0.3 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#56% at 1.5, more with 1.75
				factor = 1.75
				NOT = {
					religion_authority = 0.2 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#85% at 1,5m more with 1.75
				factor = 1.75
				NOT = {
					religion_authority = 0.1 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#The emperor abandoning Yugoslavist makes this far more likely
				factor = 4
				top_liege = {
					NOT = {
						religion = jugoslavist
					}
				}
			}
		}
	}

	balkaner_abandon_jugo = {
		only_playable = yes
		
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			NOR = {
				has_landed_title = e_yugoslavia
				AND = {
					any_demesne_title = {
						temporary = yes
					}
					independent = yes
				}
			}
			controls_religion = no # The Propiciater shouldn't be able to, obviously

			NOR = {#can't do it if Jugo has won
				has_global_flag = yugoslavism_triumphant
				has_global_flag = yugoslavism_survives
			}
			
			is_playable = yes
			religion = jugoslavist
		}
		
		allow = {
			OR = {#outright defiance requires either the Car having apostasised, or not being his vassal
				top_liege = {
					NOT = {
						religion = jugoslavist
					}
				}
				independent = yes
				has_global_flag = yugoslavism_dead
			}
			NOR = {
				trait = content
				AND = {
					trait = zealous
					has_secret_religion = no
				}
			}
		}
		
		effect = {
			abandon_jugo_effect = yes
			hidden_tooltip = {
				any_courtier = {
					limit = {
						has_landed_title = no
					}
					abandon_jugo_effect = yes
				}
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.05#This becomes more and more likely the lower Yugoslavist MA is, starts at 5% chance
			modifier = {#7.5%
				factor = 1.5
				NOT = {
					religion_authority = 0.7 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#11%
				factor = 1.5
				NOT = {
					religion_authority = 0.6 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#17%
				factor = 1.5
				NOT = {
					religion_authority = 0.5 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#25%
				factor = 1.5
				NOT = {
					religion_authority = 0.4 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#38%
				factor = 1.5
				NOT = {
					religion_authority = 0.3 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#56%
				factor = 1.75
				NOT = {
					religion_authority = 0.2 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#85%
				factor = 1.75
				NOT = {
					religion_authority = 0.1 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#The emperor abandoning Yugoslavist makes this far more likely
				factor = 4
				top_liege = {
					NOT = {
						religion = jugoslavist
					}
				}
			}
		}
	}
	
	emperor_abandon_jugo = {
		only_playable = yes
		
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			has_landed_title = e_yugoslavia
			controls_religion = no # The Propiciater shouldn't be able to, obviously
			is_playable = yes
			religion = jugoslavist
			has_global_flag = yugoslav_crisis_started
			NOR = {
				has_global_flag = yugoslavism_triumphant
				has_global_flag = yugoslavism_survives
			}
		}
		
		allow = {
			NAND = {
				trait = zealous
				has_secret_religion = no
			}
		}
		
		effect = {
			abandon_jugo_effect = yes
			hidden_tooltip = {
				any_courtier = {
					limit = {
						has_landed_title = no
					}
					abandon_jugo_effect = yes
				}
			}
			custom_tooltip = {
				text = yugo_crisis_abandon_tt
				jugoslavist = { religion_authority = { modifier = yugo_crisis_abandoned } }
				any_realm_province = {
					limit = { religion = jugoslavist }
					ROOT = { yugo_crisis_bad_effect = yes }
				}
				any_realm_province = {
					limit = { religion = ROOT }
					ROOT = { yugo_crisis_good_effect = yes }
				}
				calc_yugo_crisis_effect = yes
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 0.02#This becomes more and more likely the lower Yugoslavist MA is, starts at 5% chance
			modifier = {#7.5%
				factor = 1.5
				NOT = {
					religion_authority = 0.7 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#11%
				factor = 1.5
				NOT = {
					religion_authority = 0.6 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#17%
				factor = 1.5
				NOT = {
					religion_authority = 0.5 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#25%
				factor = 1.5
				NOT = {
					religion_authority = 0.4 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#38%
				factor = 1.5
				NOT = {
					religion_authority = 0.3 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#56%
				factor = 1.75
				NOT = {
					religion_authority = 0.2 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
			modifier = {#85%
				factor = 1.75
				NOT = {
					religion_authority = 0.1 #If the MA is below 70, every 10 points of MA lost increases the chance of the AI doing this
				}
			}
		}
	}
	
	strengthen_jugoslavism = {
		only_playable = yes
		
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			is_playable = yes
			religion = jugoslavist
			independent = yes
			has_global_flag = yugoslavism_survives
			religion_authority = 0.5#at least 50 MA
			NOT = {
				has_global_flag = yugoslavism_triumphant
			}
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		allow = {
			realm_size = 100
			prestige = 1000
			piety = 500
			war = no
			prisoner = no
			is_incapable = no
		}
		
		effect = {
			character_event = { id = yugoslav.8}#triumph of Yugoslavist
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
		}
	}
	
	create_fraticelli_papacy = {
		only_playable = yes
		
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			is_playable = yes
			religion = fraticelli
			NOT = { is_title_active = d_fraticelli }
			has_dlc = "Sons of Abraham"
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		
		allow = {
			piety = 1000
			OR = {
				owns = 333 # Rome
				any_realm_lord = {
					owns = 333
				}
			}
		}
		
		effect = {
			activate_title = { title = d_fraticelli status = yes }
			hidden_tooltip = {
				create_random_priest = {
					dynasty = none
					random_traits = yes
				}
				new_character = {
					d_fraticelli = {
						grant_title = PREV
					}
					wealth = 500
					opinion = {
						who = ROOT
						modifier = opinion_creator_of_rel_heal
					}
				}
				
				religion_authority = {
					modifier = papacy_instituted
					years = 20
				}
			}
			hidden_effect = {
				character_event = { id = 39703 }
			}
			piety = 1000
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
		}
	}

	form_the_majlis = {
		is_high_prio = yes
		only_playable = yes
		ai_check_interval = 24
		potential = {
			religion = shiite
			d_shiite = {
				has_holder = no
			}
			prisoner = no
			has_regent = no
		}

		allow = {
			any_demesne_title = {
				tier = EMPEROR
			}
			piety = 1000			
		}

		effect = {
			custom_tooltip = {
				text = form_the_majlis_TT
				}
			hidden_tooltip = {
				create_random_priest = {
					dynasty = none
					random_traits = yes
				}
				new_character = {
					d_shiite = {
						grant_title = PREV
					}
					wealth = 500
					opinion = {
						who = ROOT
						modifier = opinion_creator_of_rel_heal
					}
				}
				
				religion_authority = {
					modifier = papacy_instituted
					years = 20
					}
				}
				religion_head = {
					show_scope_change = no
					set_defacto_liege = ROOT
				}			
			}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	form_episcopal = {
		is_high_prio = yes
		only_playable = yes
		ai_check_interval = 24
		potential = {
			religion = highchurch
			d_episcopal = {
				has_holder = no
			}
			prisoner = no
			has_regent = no
		}

		allow = {
			any_demesne_title = {
				tier = EMPEROR
			}
			num_of_holy_sites = 2
			piety = 1000			
		}

		effect = {
			custom_tooltip = {
				text = form_episcopal_tt
				d_episcopal = {
					gain_title_effect = yes
				}
			}
				religion_head = {
					show_scope_change = no
					set_defacto_liege = ROOT
				}			
			}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}
		

	form_betah_israel = {
		is_high_prio = yes
		only_playable = yes
		ai_check_interval = 24
		potential = {
			religion = haymanot
			d_haymanot = {
				has_holder = no
			}
			prisoner = no
			has_regent = no
		}

		allow = {
			form_kingdom_potential = yes
			piety = 3000
			realm_size = 50
			culture = beta_israeli
			religion = haymanot
		}

		effect = {
			custom_tooltip = {
				text = form_betah_israel_TT
				}
			hidden_tooltip = {
				create_random_priest = {
					dynasty = none
					random_traits = yes
				}
				new_character = {
					d_haymanot = {
						grant_title = PREV
					}
					wealth = 500
					opinion = {
						who = ROOT
						modifier = opinion_creator_of_rel_heal
					}
				}
				
				religion_authority = {
					modifier = papacy_instituted
					years = 20
					}
				k_betah_israel = {
					gain_empire_effect = yes
				}
				any_demesne_title = {
					limit = { tier = DUKE }
					de_jure_liege = k_betah_israel
					}
				}
				religion_head = {
					show_scope_change = no
					set_defacto_liege = ROOT
				}		
			}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	restore_pope_in_rome = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			is_playable = yes
			independent = yes
			has_dlc = "Sons of Abraham"
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
			OR = {
				religion = catholic
				AND = {
					religion = fraticelli
					is_title_active = d_fraticelli
				}
			}
			
			controls_religion = no
			
			c_roma = {
				holder_scope = {
					OR = {
						character = ROOT
						is_liege_or_above = ROOT
					}
					OR = {
						AND = {
							ROOT = { religion = catholic }
							k_papacy = {
								holder_scope = {
									NOT = { character = PREVPREV }
									NOT = { is_vassal_or_below = PREVPREV }
								}
							}
						}
						AND = {
							ROOT = { religion = fraticelli }
							d_fraticelli = {
								holder_scope = {
									NOT = { character = PREVPREV }
									NOT = { is_vassal_or_below = PREVPREV }
								}
							}
						}
					}
				}
			}
			prisoner = no
			has_regent = no
		}
		
		effect = {		
			if = {
				limit = {
					religion = catholic
				}
				k_papacy = {
					holder_scope = {
						c_roma = {
							grant_title = PREV
							any_de_jure_vassal_title = {
								limit = {
									holder_scope = { 
										OR = {
											character = ROOT
											is_liege_or_above = ROOT
										}
									}
								}
								grant_title = PREVPREV
							}
						}
						save_event_target_as = restored_pope
					}
				}
			}
			if = {
				limit = {
					religion = catholic
					NOT = { has_character_flag = restored_catholic_pope_in_rome }
				}
				k_papacy = {
					holder_scope = {
						opinion = {
							who = ROOT
							modifier = opinion_restored_to_rome
						}
					}
				}
				piety = 1000
				set_character_flag = restored_catholic_pope_in_rome
			}
			
			if = {
				limit = {
					religion = fraticelli
				}
				d_fraticelli = {
					holder_scope = {
						c_roma = {
							grant_title = PREV
							any_de_jure_vassal_title = {
								limit = {
									holder_scope = { 
										OR = {
											character = ROOT
											is_liege_or_above = ROOT
										}
									}
								}
								grant_title = PREVPREV
							}
						}
						save_event_target_as = restored_pope
					}
				}
			}
			if = {
				limit = {
					religion = fraticelli
					NOT = { has_character_flag = restored_fraticelli_pope_in_rome }
				}
				piety = 1000
				set_character_flag = restored_fraticelli_pope_in_rome
			}
			hidden_effect = {
				character_event = { id = 39705 }
				set_character_flag = testflagrome
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_demesne_province = {
						NOT = { province_id = 333 }
					}
				}
			}
			modifier = {
				factor = 0
				c_roma = {
					holder_scope = {
						OR = {
							ai = no
							any_liege = { ai = no }  # AI will never take Rome province away from a player
						}
					}
				}
			}
		}
	}
	restore_pope_in_sevilla = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 36
	
		potential = {
			is_playable = yes
			independent = yes
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
			piety = 250
			religion = sevillian
			controls_religion = no
			c_sevilla = {
				holder_scope = {
					OR = {
						character = ROOT
						is_liege_or_above = ROOT
					}
					AND = {
						ROOT = { religion = sevillian }
						k_sevillian_pope = {
							holder_scope = {
								NOT = { character = PREVPREV }
								NOT = { is_vassal_or_below = PREVPREV }
							}
						}
					}
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 1000
			OR = {
				owns = 182 # sevilla
				any_realm_lord = {
					owns = 182
				}
			}
		}
		effect = {		
			piety = 1000
			prestige = 500
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { is_title_active = k_sevillian_pope }
					}
					activate_title = { title = k_sevillian_pope status = yes }
					create_random_priest = {
						random_traits = yes
						religion = ROOT
						female = no
						dynasty = none
					}
					new_character = {
						k_sevillian_pope = {
							grant_title = PREV
						}
						c_sevilla = {
							grant_title = PREV
						}
						wealth = 500
					}
					k_sevillian_pope = {
						set_preferred_capital = c_sevilla
					}
					k_sevillian_pope = {
						holder_scope = {
							opinion = {
								who = ROOT
								modifier = opinion_restored_to_sevilla
							}
						}
					}
				}
				else = {
					k_sevillian_pope ={
						holder_scope = { 
							grant_title_no_opinion = k_sevillian_pope
							wealth = 500
						}
						set_preferred_capital = c_sevilla
					}
					k_sevillian_pope = {
						holder_scope = {
							opinion = {
								who = ROOT
								modifier = opinion_restored_to_sevilla
							}
						}
					}
				}
			}
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = {
					any_demesne_province = {
						NOT = { province_id = 182 }
					}
				}
			}
			modifier = {
				factor = 0
				c_sevilla = {
					holder_scope = {
						OR = {
							ai = no
							any_liege = { ai = no }  # AI will never take Rome province away from a player
						}
					}
				}
			}
		}
	}
	
	restore_ecumenical_patriarchate = {
		only_independent = yes
		is_high_prio = yes
		ai_check_interval = 36
		
		potential = {
			is_playable = yes
			has_dlc = "Sons of Abraham"
			religion = orthodox
			independent = yes
			k_orthodox = {
				NOT = {
					holder_scope = {
						has_landed_title = b_hagiasophia
					}
				}
			}
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 1000
			OR = {
				owns = 496 # Constantinople
				any_realm_lord = {
					owns = 496
				}
			}
		}
		effect = {
			piety = 1000
			prestige = 500
			set_global_flag = patriarch_istanbul
			hidden_tooltip = {
				if = {
					limit = {
						NOT = { is_title_active = k_orthodox }
					}
					activate_title = { title = k_orthodox status = yes }
					create_random_priest = {
						random_traits = yes
						religion = ROOT
						female = no
						dynasty = none
					}
					new_character = {
						k_orthodox = {
							grant_title = PREV
						}
						b_hagiasophia = {
							grant_title = PREV
						}
						wealth = 500
					}
				}
				else = {
					k_orthodox ={
						holder_scope = { 
							grant_title_no_opinion = k_orthodox
							grant_title_no_opinion = b_hagiasophia
							wealth = 500
						}
						set_preferred_capital = c_byzantion
					}
				}
				create_random_priest = {
					random_traits = yes
					religion = ROOT
					female = no
					dynasty = none
				}
				new_character = {
					b_plopi = {
						grant_title = PREV
					}
					b_slobozia = {
						grant_title = PREV
					}
					b_capriana = {
						grant_title = PREV
					}
					b_butuceni = {
						grant_title = PREV
					}
					wealth = 500
				}
			}
		}
	}
	osvicenism_tolerate_buddhists = {
		only_playable = yes
		ai_check_interval = 36

		potential = {
			OR = {
				religion = osvicenism
				religion = kirishitan
				religion = isukirian
				religion = buddhoshinto
			}
			NOT = {
				trait = sympathy_buddhism
			}
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		allow = {
			NOT = {
				trait = zealous
			}
			custom_tooltip = {
				text = osvicenism_sympathy_buddhist
				hidden_tooltip = {
					OR = {
						any_vassal = {
							religion_group = buddhist_group
						}
						any_liege = {
							religion_group = buddhist_group
						}
						any_realm_province = {
							religion_group = buddhist_group
						}
					}
				}
			}
			piety = 50
		}
		effect = {
			add_trait = sympathy_buddhism
			piety = -50
		}
		ai_will_do = {
			factor = 1
		}
	}
	isukirian_tolerate_shinto = {
		only_playable = yes
		ai_check_interval = 36

		potential = {
				religion = isukirian
			NOT = {
				trait = sympathy_shinto
			}
			NOT = {
				has_alternate_start_parameter = { key = religion_names value = random }
			}
		}
		allow = {
			NOT = {
				trait = zealous
			}
			custom_tooltip = {
				text = isukirian_sympathy_shinto
				hidden_tooltip = {
					OR = {
						any_vassal = {
							religion_group = shintoist_group
						}
						any_liege = {
							religion_group = shintoist_group
						}
						any_realm_province = {
							religion_group = shintoist_group
						}
					}
				}
			}
			piety = 50
		}
		effect = {
			add_trait = sympathy_shinto
			piety = -50
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_novelist_patron = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = novelist 
				religion = novelist_reformed
			}
			NOR = {
				has_character_flag = picking_novelist_patron
				trait = novelist_kings_man
				trait = novelist_elf_friend
				trait = novelist_ingsoc
				trait = novelist_son_of_aslan
				trait = novelist_star_child
				trait = novelist_reformed_kings_man
				trait = novelist_reformed_elf_friend
				trait = novelist_reformed_ingsoc
				trait = novelist_reformed_son_of_aslan
				trait = novelist_reformed_star_child
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_novelist_patron
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = novelist.1 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = novelist.5 } }
			}
			piety = -50			
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_dharm_patron = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = maunaxite 
				religion = maunaxite_reformed
			}
			NOR = {
				has_character_flag = picking_novelist_patron
				trait = trimurti_cult
				trait = saraswati_cult
				trait = minor_devi_cult
				trait = krishna_cult
				trait = lakshmi_cult
				trait = trimurti_cult_reformed
				trait = saraswati_cult_reformed
				trait = minor_devi_cult_reformed
				trait = krishna_cult_reformed
				trait = lakshmi_cult_reformed
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_novelist_patron
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = dharm.1 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = dharm.5 } }
			}
			piety = -50			
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_fetish_decision = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			age = 16
			religion = voodun
			NOR = {
				has_character_flag = picking_fetish_flag
				has_character_modifier = hidden_timer_modif
			}
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_fetish_flag
			hidden_tooltip = { character_event = { id = fetish.1 } }
			piety = -50			
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_jewish_school = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = jewish 
				religion = mikraist
			}
			NOR = {
				has_character_flag = picking_jewish_school
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_jewish_school
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = israelstuff.6 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = israelstuff.8 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_maaravi_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = maaravi 
			}
			NOR = {
				has_character_flag = picking_maaravi
				trait = maaravi_orthodox
				trait = maaravi_rabbinical
				trait = maaravi_reform
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_maaravi
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = maaravi.1 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = maaravi.2 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_hasidic_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = hasidic 
			}
			NOR = {
				has_character_flag = picking_hasidic
				trait = hasidic_breslov
				trait = hasidic_lubavitch
				trait = hasidic_satmar
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_hasidic
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = maaravi.3 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = maaravi.4 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_bush_way = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = bushism 
			}
			NOR = {
				has_character_flag = picking_bush
				trait = bush_old_way
				trait = bush_new_way
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_bush
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = liberia.1 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = liberia.2 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_guardians_branch = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = lakefolk_pagan
				religion = lakefolk_pagan_reformed
			}
			NOR = {
				has_character_flag = picking_lakefolk_branch
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_lakefolk_branch
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = america.27 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = america.28 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_mainline_church = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = mainline
			}
			NOR = {
				has_character_flag = picking_mainline_church
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_mainline_church
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = america.29 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = america.31 } }
			}
			piety = -20		
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_jadidist_sympathy = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = jadidist
			}
			NOR = {
				has_character_flag = picking_jadidist
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_jadidist
			if = {
				hidden_tooltip = { character_event = { id = jadidist.1 } }
			}
			piety = -20	
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_britjews_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = congregationist
			}
			NOR = {
				has_character_flag = picking_britjews
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_britjews
			if = {
				hidden_tooltip = { character_event = { id = britjews.1 } }
			}
			piety = -20	
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_koranist_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			religion = koranist
			NOR = {
				has_character_flag = picking_koranist
				has_character_modifier = hidden_timer_modif
				trait = koranist_conservative
				trait = koranist_moderate
				trait = koranist_progressive
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_koranist
			if = {
				hidden_tooltip = { character_event = { id = koranist.1 } }
			}
			piety = -500
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_jadid_study = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = jadidist
			}
			NOR = {
				has_character_flag = picking_jadidist2
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_jadidist2
			if = {
				hidden_tooltip = { character_event = { id = jadidist.2 } }
			}
			piety = -20	
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_congregationist_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = congregationist
			}
			NOR = {
				has_character_flag = picking_congregationist
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_congregationist
			if = {
				hidden_tooltip = { character_event = { id = britjews.2 } }
			}
			piety = -50
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_federationist_sect = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = federationist
			}
			NOR = {
				has_character_flag = picking_federationist
				has_character_modifier = hidden_timer_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picking_federationist
			if = {
				hidden_tooltip = { character_event = { id = britjews.3 } }
			}
			piety = -50
			hidden_tooltip = { add_character_modifier = { name = hidden_timer_modif duration = 1825 hidden = yes} }
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	study_american_philosophy = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = constitutional
			}
			NOR = {
				has_character_flag = picking_study_america
				has_character_modifier = studied_pragmatism
				has_character_modifier = studied_jingoism
				has_character_modifier = studied_transcendantalism
				 has_character_modifier = studied_foundationalism
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 10
		}
		effect = {
			set_character_flag = picking_study_america
			if = {
				hidden_tooltip = { character_event = { id = america.26 } }
			}
			piety = -10	
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_vagarna_branch = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = vagarna
			}
			NOT = {
				has_character_flag = picking_vagarna_branch
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_vagarna_branch
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = vagarna.1 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = vagarna.3 } }
			}
			piety = -20	
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_zarist_cult = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = zarist
			}
			NOT = {
				has_character_flag = picking_zarist_cult
			}
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_zarist_cult
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = zarist.300 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = zarist.302 } }
			}
			piety = -20	
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_sufi_school = {
		only_playable = yes
		ai_check_interval = 3

		potential = {
			religion = sufi
			NOT = {
				has_character_flag = picked_sufi_school
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picked_sufi_school
			hidden_tooltip = { character_event = { id = sufi.1 } }
			piety = -50			
		}
		ai_will_do = {
			factor = 0.5
		}
	}
	choose_muwa_school = {
		only_playable = yes
		ai_check_interval = 3
		min_age = 16
		potential = {
			religion = muwahidunna
			NOT = {
				has_character_flag = picked_muwa_school
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			set_character_flag = picked_muwa_school
			hidden_tooltip = { character_event = { id = muwa.1 } }
			piety = -50			
		}
		ai_will_do = {
			factor = 0.5
		}
	}	
	jacobinist_sacrifice_peasant = {
		only_playable = yes
		
		is_high_prio = yes
		ai_check_interval = 6
	
		potential = {
			is_playable = yes
			religion = jacobinist
			prisoner = no
			has_regent = no
			NOT = { wealth = 300 }
		}
		
		allow = {
			religion = jacobinist
			prestige = 150
			custom_tooltip = {
				text = JACOBINIST_HAVENT_SACRIFICED
				ruled_years = 4
				NOT = { has_character_modifier = madame_sacrifice_timer_2 }
			}
		}
		
		effect = {
			prestige = -150
			#character_event = { id = yugoslav.8 tooltip = JACOBINIST_GONNA_SACRIFICE_EM}
			custom_tooltip = {
				text = JACOBINIST_GONNA_SACRIFICE_EM
			}
			scaled_wealth = { value = 0.75 min = 10 max = 500 }
			jacobinist_madame_timer_effect = yes
		}
		
		revoke_allowed = {
			always = no
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.3 #slow down a bit
			}
			modifier = {
				factor = 0
				NOT = {
					scaled_wealth = { value = 0.25 min = 10 max = 500 }
				}
			}
			modifier = {
				factor = 0.5
				war = yes
			}
			modifier = {
				factor = 0.5
				any_courtier = {
					prisoner = yes
					host = { character = ROOT }
					NOT = { diplomatic_immunity = yes }
				}
			}
			modifier = {
				factor = 0.5
				any_courtier = {
					count = 2
					prisoner = yes
					host = { character = ROOT }
					NOT = { diplomatic_immunity = yes }
				}
			}
			modifier = {
				factor = 0.5
				any_courtier = {
					count = 3
					prisoner = yes
					host = { character = ROOT }
					NOT = { diplomatic_immunity = yes }
				}
			}
		}
	}
	discern_your_future = {
		only_playable = yes
		ai_check_interval = 6
		is_high_prio = yes
		
		potential = {
			OR = {
				religion = thelemic_reformed
				religion = theosophy
				religion = summer_queen
				religion = thelemic
				religion = orange_king
				has_religion_feature = religion_tarot
			}
			is_adult = yes
			NOR = {
				has_character_modifier = the_magician_modif
				has_character_modifier = the_high_priestess_modif
				has_character_modifier = the_empress_modif
				has_character_modifier = the_emperor_modif
				has_character_modifier = the_hierophant_modif
				has_character_modifier = the_lovers_modif
				has_character_modifier = the_chariot_modif
				has_character_modifier = the_strength_modif
				has_character_modifier = the_hermit_modif
				has_character_modifier = the_wheel_of_fortune_modif
				has_character_modifier = the_justice_modif
				has_character_modifier = the_hanged_man_modif
				has_character_modifier = the_death_modif
				has_character_modifier = the_temperance_modif
				has_character_modifier = the_devil_modif
				has_character_modifier = the_tower_modif
				has_character_modifier = the_star_modif
				has_character_modifier = the_moon_modif
				has_character_modifier = the_sun_modif
				has_character_modifier = the_judgement_modif
				has_character_modifier = the_world_modif
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 50
		}
		effect = {
			character_event = { id = thelema.1013 }
			piety = -50		
		}
		ai_will_do = {
			factor = 1
		}
	}
	choose_anglican_branch = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			religion = anglican
			NOR = {
				has_character_flag = picking_anglican_branch
				trait = high_anglican
				trait = broad_anglican
				trait = low_anglican
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_anglican_branch
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = cleanup.19 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = cleanup.20 } }
			}
			piety = -20		
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	choose_episcopal_branch = {
		only_playable = yes
		ai_check_interval = 3
		is_high_prio = yes
		
		potential = {
			religion = highchurch
			NOR = {
				has_character_flag = picking_episcopal_branch
				trait = high_anglican2
				trait = broad_anglican2
				trait = low_anglican2
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			piety = 20
		}
		effect = {
			set_character_flag = picking_episcopal_branch
			if = {
				limit = { ai = no }
				hidden_tooltip = { character_event = { id = cleanup.19 } }
			}
			else = {
				hidden_tooltip = { letter_event = { id = cleanup.20 } }
			}
			piety = -20		
		}
		ai_will_do = {
			factor = 1
		}
	}
}
targeted_decisions = {
	get_khalsa_baptism = {
			filter = self
			only_playable = yes
			ai_check_interval = 24
			
			potential = {
				religion = sikh
				NOT = {
					trait = khalsa_baptism
				}
				prisoner = no
				has_regent = no
			}
			allow = {
				NOR = {
					trait = lustful
					trait = cynical
					trait = gluttonous
					trait = drunkard
					trait = hedonist
				}
				OR = {#women can't do this unless they prove themselves really worthy
					is_female = no
					trait = brave
					trait = zealous
					martial = 12
				}
			}
			effect = {	
					narrative_event = { id = sikh.1 }
			}		
		}
	nobelian_sell_scrap = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			any_artifact = {
				artifact_type = scrap
				count = 1
			}		
			prisoner = no
			has_regent = no	
		}
		allow = {
		}
		effect = {
			character_event = { id = nobelian.34 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
					NOT = {
					any_artifact = {
					artifact_type = scrap
					count = 3
					}						
				}
			}
			modifier = {
				factor = 3
					any_artifact = {
						artifact_type = scrap
						count = 5
					}				
				}
		}
	}		
	nobelian_study_scrap = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			any_artifact = {
				artifact_type = scrap
				count = 1
			}		
			prisoner = no
			has_regent = no	
		}
		allow = {
		}
		effect = {
			character_event = { id = nobelian.35 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
					NOT = {
					any_artifact = {
					artifact_type = scrap
					count = 3
					}						
				}
			}
			modifier = {
				factor = 3
					any_artifact = {
						artifact_type = scrap
						count = 5
					}				
				}
		}
	}		
	nobelian_merge_insights = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 2
				}
			}
			OR = {
				any_artifact = {
					artifact_type = mystic_insight
					count = 1
				}	
				any_artifact = {
					artifact_type = mystic_tome
					count = 1
				}	
			}
			prisoner = no
			has_regent = no		
		}
		allow = {
		}
		effect = {
			character_event = { id = nobelian.18 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}
	
	nobelian_repair_stuff= {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 2
				}
			}
			any_artifact = {
				artifact_type = broken_machine
				count = 1
			}		
			prisoner = no
			has_regent = no	
		}
		allow = {
		}
		effect = {
			destroy_artifact = broken_machine
			destroy_artifact = theorem
			add_artifact = repaired_machine
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}	
	
	nobelian_merge_manuscript_fragments = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 2
				}
			}
			any_artifact = {
				OR = {
					has_artifact_flag = manuscript_fragment_flag
					has_artifact_flag = partial_manuscript_flag 
				}
			}	
			prisoner = no
			has_regent = no		
		}
		allow = {
			any_artifact = {
				OR = {
					has_artifact_flag = manuscript_fragment_flag
					has_artifact_flag = partial_manuscript_flag 
				}
			}	
		}
		effect = {
			character_event = { id = nobelian.19 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}
	
	nobelian_create_teaset = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 3
				}
			}
			OR = {
				any_artifact = {
					artifact_type = teapot
					count = 1
				}
				any_artifact = {
					artifact_type = teacup
					count = 1
				}				
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			any_artifact = {
				artifact_type = teapot
				count = 1
			}
			any_artifact = {
				artifact_type = teacup
				count = 2
			}	
		}
		effect = {
			destroy_artifact = teacup
			destroy_artifact = teacup
			destroy_artifact = teapot
			character_event = { id = nobelian.25 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}
	nobelian_create_tesla_coil= {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 3
				}
			}
			OR = {
				any_artifact = {
					artifact_type = tesla_coil_piece
					count = 1
				}		
			}
			prisoner = no
			has_regent = no
		}
		allow = {
		}
		effect = {
			destroy_artifact = tesla_coil_piece
			destroy_artifact = tesla_coil_piece
			destroy_artifact = tesla_coil_piece
			character_event = { id = nobelian.26 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}
	nobelian_create_beer_recipe= {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 3
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			any_artifact = {
				artifact_type = beer_recipe_fragment
				count = 3
			}
		}
		effect = {
			destroy_artifact = beer_recipe_fragment
			destroy_artifact = beer_recipe_fragment
			destroy_artifact = beer_recipe_fragment
			character_event = { id = nobelian.32 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}	
	nobelian_create_artillery_book= {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				AND = {
					religion = vagarna
					trait = old_lore
				}
				AND = {
					society_member_of = hermetics
					society_rank = 3
				}
			}
			prisoner = no
			has_regent = no
		}
		allow = {
			any_artifact = {
				artifact_type = artillery_book_fragment
				count = 3
			}
		}
		effect = {
			destroy_artifact = artillery_book_fragment
			destroy_artifact = artillery_book_fragment
			destroy_artifact = artillery_book_fragment
			character_event = { id = nobelian.33 }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = cynical
			}
			modifier = {
				factor = 1.5
				trait = zealous
			}
		}
	}

	take_morphine = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			any_artifact = {
				artifact_type = morphine
				count = 1
			}	
			prisoner = no
			has_regent = no		
		}
		allow = {
			NOR = {
				has_character_modifier = morphine_active
				has_character_modifier = morphine_overdose
			}
		}
		effect = {
			if = {
				limit = {
					NOT = {
						has_character_modifier = morphine_safety_timer
					}
				}
			
			add_character_modifier = {
				name = morphine_active
				duration = 365
			} 
			add_character_modifier = {
				name = morphine_safety_timer
				duration = 1725
			}
			set_variable = { which = morphine_use_counter value = 1 }
			
		  }
		else_if = {
				limit = {
						has_character_modifier = morphine_safety_timer
				}
			add_character_modifier = {
				name = morphine_overdose
				duration = 365
			}
		  }
		if = {#deliberately NOT an else_if - this should be possible in addition to the act of taking it
			limit = {
				check_variable = { which = morphine_use_counter value = 3 }			
			}
			add_character_modifier = {
				name = morphine_addiction
			}
		}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}
	
	convert_child_koranist = {
		ai_check_interval = 60
		
		from_potential = {
			is_playable = yes
			religion = koranist
			prisoner = no
			has_regent = no
		}
		potential = {
			religion = koranist
			OR = {
				is_child_of = FROM
				is_liege_or_above = FROM
			}
			NOT = {
				age = 16
			}
		}
		effect = {
			hidden_tooltip = {
				remove_trait = koranist_conservative
				remove_trait = koranist_moderate
				remove_trait = koranist_progressive
			}
			if = {
				limit = {
					FROM = { trait = koranist_conservative }	
				}
				add_trait = koranist_conservative
			}
			if = {
				limit = {
					FROM = { trait = koranist_moderate }	
				}
				add_trait = koranist_moderate
			}
			if = {
				limit = {
					FROM = { trait = koranist_progressive }	
				}
				add_trait = koranist_progressive
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 0.15
			modifier = {
				factor = 0.7
				trait = zealous
			}
			modifier = {
				factor = 5
				FROM = {
					trait = koranist_conservative
				}
			}

			modifier = {
				factor = 20
				NOR = {
					trait = koranist_conservative
					trait = koranist_moderate
					trait = koranist_progressive
				}
			}

		}
	}
	
	lewis_conversion = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			NOR = {
				religion = novelist
				religion = novelist_reformed
			}
			any_artifact = {
				artifact_type = lion_witch_wardrobe
				count = 1
			}			
			prisoner = no
			has_regent = no
		}
		allow = {

		}
		effect = {
			if = {
				limit = {
					d_novelist = {
						has_holder = yes
					}
				}
				religion = novelist_reformed
			}
			else = {
				religion = novelist
			}
			achievement_intriguing_reading_done_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = zealous
			}
		}
	}
	
	jacobinist_conversion_book = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			NOT = {
				religion = jacobinist
			}
			any_artifact = {
				artifact_type = guillotines_for_a_humane_society
				count = 1
			}			
			prisoner = no
			has_regent = no
		}
		allow = {

		}
		effect = {
			religion = jacobinist
			achievement_intriguing_reading_done_effect = yes
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0
				trait = zealous
			}
		}
	}
	
	kipling_morality_book = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			OR = {
				trait = slothful
				trait = lustful
				trait = cruel
				trait = paranoid
				trait = greedy
				trait = deceitful
			}
			NOT = {
				has_character_modifier = used_great_book_timer
			}
			any_artifact = {
				artifact_type = the_jungle_book
				count = 1
			}			
			prisoner = no
			has_regent = no
		}
		allow = {
		}
		effect = {
			add_character_modifier = {
				name = used_great_book_timer
				duration = 5475
	            hidden = yes
			}
			if = {
				limit = {
					trait = slothful
				}
				remove_trait = slothful
			}
			else_if = {
				limit = {
					trait = lustful
				}
				remove_trait = lustful
			}
			else_if = {
				limit = {
					trait = cruel
				}
				remove_trait = cruel
			}
			else_if = {
				limit = {
					trait = paranoid
				}
				remove_trait = paranoid
			}
			else_if = {
				limit = {
					trait = greedy
				}
				remove_trait = greedy
			}
			else_if = {
				limit = {
					trait = deceitful
				}
				remove_trait = deceitful
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				trait = zealous
			}
		}
	}

	dante_morality_book = {
		filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			NOT = {
				has_character_modifier = used_great_book_timer
			}
			any_artifact = {
				artifact_type = the_divine_comedy
				count = 1
			}			
			prisoner = no
			has_regent = no
		}
		allow = {
			NAND = {
				trait = chaste
				trait = temperate
				trait = charitable
				trait = diligent
				trait = patient
				trait = kind
				trait = humble
			}
		}
		effect = {
			add_character_modifier = {
				name = used_great_book_timer
				duration = 5475
	            hidden = yes
			}
			random_list = {
				10 = {
					add_trait = chaste
				}
				10 = {
					add_trait = temperate
				}
				10 = {
					add_trait = charitable
				}
				10 = {
					add_trait = diligent
				}
				10 = {
					add_trait = patient
				}
				10 = {
					add_trait = kind
				}
				10 = {
					add_trait = humble
				}				
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.25
			}
			modifier = {
				factor = 0
				trait = zealous
			}
		}
	}

	take_penicillin = {
		filter = self
		ai_target_filter = self
		ai_check_interval = 12
		#this decision doesn't need a from_potential, because it targets yourself, so there's no difference between the player character and the character being targeted
		potential = {
			has_disease_trigger = yes		
			any_artifact = {
				artifact_type = penicillin
				count = 1
			}
			character = FROM
			prisoner = no
			has_regent = no
		}
		allow = {
			NOT = {
				has_character_modifier = took_penicillin_timer
			}
		}
		effect = {
			add_character_modifier = {
				name = took_penicillin_timer
				duration = 1825
			}			
			if = {
				limit = {
					trait = flu
				}
				random_list = {
				60 = {
					remove_trait = flu
				}
				40 = {}
				}
			}
			else_if = {
				limit = {
					trait = food_poisoning
				}
				random_list = {
				60 = {
					remove_trait = food_poisoning
				}
				40 = {}
				}
			}
			else_if = {
				limit = {
					trait = has_tuberculosis
					trait = has_typhoid_fever
					trait = has_typhus				
					}
				random_list = {
				40 = {
					remove_trait = has_tuberculosis
					remove_trait = has_typhoid_fever
					remove_trait = has_typhus					
					}
				60 = {
				
				}
				}
			}
			else_if = {
				limit = {
					trait = has_measles
					trait = has_small_pox			
					}
				random_list = {
				30 = {
					remove_trait = has_measles
					remove_trait = has_small_pox
					}
				70 = {
				
				}
				}
			}			

		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
		}
	}	
	
	stalinist_fabricate_evidence = {
		only_playable = yes
		filter = vassals
		ai_target_filter  = vassals
		ai_check_interval = 6
		from_potential = {
			is_playable = yes
			OR = {
				religion = stalinist
				religion = red_cult
			}
			prisoner = no
			has_regent = no
		}
		potential = {
			vassal_of = FROM
			NOT = { character = FROM }
			is_ruler = yes
		}
		allow = {#This is meant to allow a stalinist independent ruler to spend a scaling amount of piety to gain a reason to imprison a vassal (FROM in this context is the player character)
			trigger_if = {
				limit = { tier = BARON }
				FROM = {
					show_scope_change = no
					prestige = 50
					piety = 50
				}
			}
			trigger_else_if = {
				limit = { tier = COUNT }
				FROM = {
					show_scope_change = no
					prestige = 100
					piety = 100
				}
			}
			trigger_else_if = {
				limit = { tier = DUKE }
				FROM = {
					show_scope_change = no
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { tier = KING }
				FROM = {
					show_scope_change = no
					prestige = 500
					piety = 500
				}
			}
			trigger_else = {
				is_ruler = yes
			}
		}
		effect = {
			if = {
				limit = {
					tier = BARON
				}
				FROM = {
					show_scope_change = no
					prestige = -50
					piety = -50
				}
			}
			else_if = {
				limit = {
					tier = COUNT
				}
				FROM = {
					show_scope_change = no
					prestige = -100
					piety = -100
				}
			}
			else_if = {
				limit = {
					tier = DUKE
				}
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = {
					tier = KING
				}
				FROM = {
					show_scope_change = no
					prestige = -500
					piety = -500
				}
			}
			hidden_tooltip = {
				ROOT = {
					character_event = { id = stalin.1 }				
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
			}
			modifier = {
				factor = 2.5
				FROM = { trait = ambitious }
			}
			modifier = {
				factor = 0.2
				FROM = { trait = content }
			}
			modifier = {
				factor = 2.5
				FROM = { trait = greedy }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = charitable }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = arbitrary }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = just }
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 2.0
				in_faction = yes
			}
			modifier = {
				factor = 2.0
				leads_faction = yes
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = 0 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -30 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -90 } } }
			}
			modifier = {
				factor = 0.5
				FROM = { opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.5
				FROM = { opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 0.1
				FROM = { opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 3
				is_rival = FROM
			}
			modifier = {
				factor = 0
				is_friend = FROM
			}
			modifier = {
				factor = 0.2
				has_non_aggression_pact_with = FROM
			}
		}
	}
	legalist_fabricate_evidence = {
		only_playable = yes
		filter = vassals
		ai_target_filter  = vassals
		ai_check_interval = 6
		from_potential = {
			is_playable = yes
			religion = legalist
			prisoner = no
			has_regent = no
		}
		potential = {
			NOT = { character = FROM }
		}
		allow = {#This is meant to allow a stalinist independent ruler to spend a scaling amount of piety to gain a reason to imprison a vassal (FROM in this context is the player character)
			FROM = {
				OR = {
					trait = trained_imperial_law
					trait = trained_republican_law
					trait = trained_ccp_law
				}
				any_artifact = {
					has_artifact_flag = chinese_stamp
				}
			}
			trigger_if = {
				limit = { trait = trained_imperial_law }
				FROM = {
					show_scope_change = no
					trait = trained_imperial_law
					prestige = 150
					piety = 150
				}
			}
			trigger_else_if = {
				limit = { trait = trained_republican_law }
				FROM = {
					show_scope_change = no
					trait = trained_imperial_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { trait = trained_ccp_law }
				FROM = {
					show_scope_change = no
					trait = trained_imperial_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { trait = trained_ccp_law }
				FROM = {
					show_scope_change = no
					trait = trained_ccp_law
					prestige = 150
					piety = 150
				}
			}
			trigger_else_if = {
				limit = { trait = trained_republican_law }
				FROM = {
					show_scope_change = no
					trait = trained_ccp_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { trait = trained_imperial_law }
				FROM = {
					show_scope_change = no
					trait = trained_ccp_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { trait = trained_ccp_law }
				FROM = {
					show_scope_change = no
					trait = trained_republican_law
					prestige = 150
					piety = 150
				}
			}
			trigger_else_if = {
				limit = { trait = trained_republican_law }
				FROM = {
					show_scope_change = no
					trait = trained_republican_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else_if = {
				limit = { trait = trained_imperial_law }
				FROM = {
					show_scope_change = no
					trait = trained_republican_law
					prestige = 250
					piety = 250
				}
			}
			trigger_else = {
				FROM = {
					show_scope_change = no
					prestige = 100
					piety = 100
				}
			}
		}
		effect = {
			if = {
				limit = { trait = trained_imperial_law FROM = { trait = trained_imperial_law } }
				FROM = {
					show_scope_change = no
					prestige = -150
					piety = -150
				}
			}
			else_if = {
				limit = { trait = trained_republican_law FROM = { trait = trained_imperial_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = { trait = trained_ccp_law FROM = { trait = trained_imperial_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = { trait = trained_republican_law FROM = { trait = trained_republican_law } }
				FROM = {
					show_scope_change = no
					prestige = -150
					piety = -150
				}
			}
			else_if = {
				limit = { trait = trained_republican_law FROM = { trait = trained_imperial_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = { trait = trained_republican_law FROM = { trait = trained_ccp_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = { trait = trained_ccp_law FROM = { trait = trained_ccp_law } }
				FROM = {
					show_scope_change = no
					prestige = -150
					piety = -150
				}
			}
			else_if = {
				limit = { trait = trained_ccp_law FROM = { trait = trained_imperial_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else_if = {
				limit = { trait = trained_ccp_law FROM = { trait = trained_republican_law } }
				FROM = {
					show_scope_change = no
					prestige = -250
					piety = -250
				}
			}
			else = {
				FROM = {
					show_scope_change = no
					prestige = -100
					piety = -100
				}
			}
			hidden_tooltip = {
				ROOT = {
					character_event = { id = legalism.1 }				
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2
			}
			modifier = {
				factor = 2.5
				FROM = { trait = ambitious }
			}
			modifier = {
				factor = 0.2
				FROM = { trait = content }
			}
			modifier = {
				factor = 2.5
				FROM = { trait = greedy }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = charitable }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = arbitrary }
			}
			modifier = {
				factor = 0.5
				FROM = { trait = just }
			}
			modifier = {
				factor = 1.5
				trait = ambitious
			}
			modifier = {
				factor = 0.5
				trait = content
			}
			modifier = {
				factor = 2.0
				in_faction = yes
			}
			modifier = {
				factor = 2.0
				leads_faction = yes
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = 0 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -30 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -60 } } }
			}
			modifier = {
				factor = 1.5
				FROM = { NOT = { opinion = { who = ROOT value = -90 } } }
			}
			modifier = {
				factor = 0.5
				FROM = { opinion = { who = ROOT value = 25 } }
			}
			modifier = {
				factor = 0.5
				FROM = { opinion = { who = ROOT value = 50 } }
			}
			modifier = {
				factor = 0.1
				FROM = { opinion = { who = ROOT value = 75 } }
			}
			modifier = {
				factor = 3
				is_rival = FROM
			}
			modifier = {
				factor = 0
				is_friend = FROM
			}
			modifier = {
				factor = 0.2
				has_non_aggression_pact_with = FROM
			}
		}
	}
	create_noahides_decision = {
		only_playable = yes
		ai_check_interval = 12
	    is_high_prio = yes
	
		from_potential = {
			religion_group = jewish_group
			NOR = {
				trait = jew_liberal
				trait = maaravi_reform
			}
			OR = {
				diplomacy = 15
				learning = 15
			}
			prisoner = no
			has_regent = no
			NOT = {has_character_modifier=hidden_timer_modif}
		}
	
		potential = {
			is_within_diplo_range = FROM
			OR = {
				is_vassal_or_below = FROM
				is_liege_or_above = FROM
				is_friend = FROM
				trait = sympathy_judaism
			}
			OR = {
				religion_group = christian
				religion_group = zoroastrian_group
				religion_group = muslim
				religion = druze
				religion = alawite
				religion = mandaeanism
				religion = islamity
				religion = muwahidunna
				religion = jugoslavist
				religion = bahai
			}
			prisoner = no
			has_regent = no
		}
		
		allow = {
			ROOT = {
				opinion = { 
					who = FROM
					value = 20
				}
			}
			FROM = {
				opinion = { 
					who = ROOT
					value = 20
				}
				piety = 100
			}
		}
		
		effect = {
			ROOT = {
				add_trait = noahide
	        }
	        FROM = {
	            add_character_modifier = {
	                modifier = hidden_timer_modif
	                duration = 30
	                hidden = yes
	            }
				piety = -100
	        }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.75 # Slow down a bit
			}
			modifier = {
				factor = 0.5
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = zealous }
			}
		}
	}
	suomi_singing_contest_decision = {
		only_playable = yes
		ai_check_interval = 10
	    is_high_prio = yes
	
		from_potential = {
			is_playable = yes
			OR = {
				religion = finnish_pagan
				religion = finnish_pagan_reformed
			}
			OR = {
				trait = poet
				trait = lunatic
				trait = zealous
			}
			prisoner = no
			has_regent = no
		}
	
		potential = {
			is_within_diplo_range = FROM
			OR = {
				religion = finnish_pagan
				religion = finnish_pagan_reformed
			}
			OR = {
				is_rival = FROM
				trait = poet
				trait = lunatic
				trait = zealous
			}
			prisoner = no
			has_regent = no
		}
		
		allow = {
			prestige = 200
			wealth = 100
		}
		
		effect = {
			FROM = { save_event_target_as = poet_1 } 
	    	save_event_target_as = poet_2 
	        
	        FROM = {
	            add_character_modifier = {
	                modifier = recent_song_duel_timer
	                duration = 90
	                hidden = yes
	            }
	        }
	        hidden_tooltip = {
	            character_event = { id = SCE.1 } #Duel evaluation (hidden) + result event as follow-up.
	        }
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2 # Slow down a bit
			}
			modifier = {
				factor = 0
				FROM = { trait = cynical }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = zealous }
			}
		}
	}
	
	jacobinist_sacrifice_decision = {
		only_playable = yes
		ai_check_interval = 2
	    diplomacy_icon = GFX_sacrifice_decision
	
		ai_target_filter = home_court
	
		from_potential = {
			show_only_failed_conditions = yes
			is_playable = yes
			religion = jacobinist
			prisoner = no
			has_regent = no
		}
	
		potential = {
			prisoner = yes
			host = { character = FROM }
		}
		
		allow = {
			ROOT = {
				NOT = { diplomatic_immunity = yes }
				prisoner = yes 
			}
		}
		
		effect = {
			death = {
				death_reason = death_jacobinist_sacrifice
				killer = FROM
			}
			hidden_tooltip = {
				jacobinist_sacrifice_after_death_effect = yes
				any_liege = {
					limit = {
						ai = no
						NOT = { character = FROM }
						NOT = { religion = FROM }
					}
					character_event = { id = jacobinists.2 }
				}
				if = {
					limit = {
						OR = {
							ai = no
							religion = FROM
						}
					}
					character_event = { id = jacobinists.3 }
				}
				FROM = {
					narrative_event = { id = jacobinists.4 }
				}
			}
		}
		revoke_allowed = {
			always = no
		}
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.2 # Slow down a bit
			}
			modifier = {
				factor = 0
				FROM = { trait = cynical }
				NAND = {
					ruled_years = 4
					NOT = { has_character_modifier = madame_sacrifice_timer_2 }
				}
			}
			modifier = {
				factor = 1.5
				FROM = { trait = zealous }
			}
			modifier = {
				factor = 1.5
				FROM = { trait = guillotine_master_1 }
			}
			modifier = {
				factor = 1.75
				FROM = { trait = guillotine_master_2 }
			}
			modifier = {
				factor = 2
				FROM = { trait = guillotine_master_3 }
			}
			
			modifier = {
				factor = 1.56
				desired_by_madame_1 = yes
			}
			modifier = {
				factor = 1.56
				desired_by_madame_2 = yes
			}
			modifier = {
				factor = 0.64
				hated_by_madame_1 = yes
			}
			modifier = {
				factor = 0.64
				hated_by_madame_2 = yes
			}
			modifier = {
				factor = 1.5
				ruled_years = 3
				NOT = { has_character_modifier = madame_sacrifice_timer_3 }
			}
			modifier = {
				factor = 2
				ruled_years = 4
				NOT = { has_character_modifier = madame_sacrifice_timer_2 }
				NOT = { FROM = { trait = cynical } }
			}
			modifier = {
				factor = 5
				ruled_years = 5
				NOT = { has_character_modifier = madame_sacrifice_timer_1 }
			}
		}
	}
}
title_decisions = {
	zoroastrian_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			OR = {
				religion = zoroastrian
				religion = neo_zorvanite
			}
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = { 
				OR = {
					religion = zoroastrian
					religion = neo_zorvanite
				} 
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				OR = {
					religion = zoroastrian
					religion = neo_zorvanite
				}
			}
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	
	hmongism_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = hmongism
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = { 
				religion = hmongism
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				religion = hmongism
			}
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	ramadi_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = ramadi
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = { 
				religion = ramadi
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				religion = ramadi
			}
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	legalist_tax_rebates = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = legalist
			any_artifact = {
				has_artifact_flag = chinese_stamp
			}
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	mattaism_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = mattaism
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = {
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					christian_syncretic_religion = yes
					muslim_syncretic_religion = yes
				}
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					christian_syncretic_religion = yes
					muslim_syncretic_religion = yes
				}
			}
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	alevi_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = alevi
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = {
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					religion_group = zoroastrian_group
					christian_syncretic_religion = yes
					muslim_syncretic_religion = yes
				}
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	sikh_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			religion = sikh
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = {
				OR = {
					religion_group = christian
					religion_group = muslim
					religion_group = jewish_group
					religion_group = old_world_cultist_group
					religion_group = indian_group
					religion_group = zoroastrian_group
					religion_group = buddhist_group
					christian_syncretic_religion = yes
					muslim_syncretic_religion = yes
				}
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 
				}		
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
	buddhist_help_the_poor = {
		only_playable = yes
		ai_check_interval = 3
		
		from_potential = {
			is_ruler = yes
			OR = {
				religion = ho_cult
				religion_group = buddhist_group
				religion = osvicenism
			}
			NOT = {
				has_character_modifier = hidden_timer_modif
			}
		}
		
		potential = {
			tier = COUNT
			location = { 
				OR = {
					religion = ho_cult
					religion_group = buddhist_group
					religion = osvicenism
				}
			}
			holder_scope = {
				OR = {
					is_liege_or_above = FROM
					character = FROM
				}
			}
		}
		
		allow = {
			location = {
				OR = {
				religion = ho_cult
					religion_group = buddhist_group
					religion = osvicenism
				}
			}
			FROM = {
				wealth = 250
			}
		}
		
		effect = {
			FROM = {
				hidden_tooltip = { 
					add_character_modifier = { name = hidden_timer_modif duration = 183 hidden = yes} 		
				}
				wealth = -250
				piety = 100
			}
			location = {
				trigger_switch = {
					on_trigger	= terrain
					farmlands	= { change_variable = { which = prosperity_value value = 20 } } #gain depends on terrain type
					plains		= { change_variable = { which = prosperity_value value = 15 } }
					steppe 		= { change_variable = { which = prosperity_value value = 15 } }
					forest 		= { change_variable = { which = prosperity_value value = 12 } }
					hills		= { change_variable = { which = prosperity_value value = 12 } }
					tells		= { change_variable = { which = prosperity_value value = 12 } }
					jungle		= { change_variable = { which = prosperity_value value = 9 } }
					desert		= { change_variable = { which = prosperity_value value = 9 } }
					mountain	= { change_variable = { which = prosperity_value value = 7 } }
					arctic		= { change_variable = { which = prosperity_value value = 7 } }
				}
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0.6
			}
			modifier = {
				factor = 0.5
				FROM = {trait = cynical}
			}
			modifier = {
				factor = 0.5
				FROM = {trait = greedy}
			}
			modifier = {
				factor = 1.5
				FROM={trait = zealous}
			}
			modifier = {
				factor = 1.5
				FROM={trait = charitable}
			}
		}
	}
}