######################################
# Scripted Triggers for determine exile
######################################

is_real_offmap_governor = {
	is_offmap_governor = yes
	NOT = { has_landed_title = d_outlaws_of_the_marsh }
}

is_anti_caliph = {
	OR = {
		has_claim = d_sunni
		has_claim = d_ibadi
		has_claim = d_shiite
		has_claim = d_bahai
		has_claim = d_wahhabi
	}
}

doesnt_holds_special_empire = {
	custom_tooltip = {
		text = does_not_hold_special_empire
		NOT = {
			any_demesne_title = {
				OR = {
					title = e_british_india
					title = e_zapadoslavia
					title = e_great_russia
					title = e_cccp
					title = e_european_union
					title = e_austria_hungary
				}
			}
		}
	}
}
form_kingdom_potential = {
	is_alternate_start = no
	is_vice_royalty = no
	independent = yes
	rebel = no
}
form_empire_potential = {
	form_kingdom_potential = yes
	any_demesne_title = {
		OR = {
			tier = KING
			tier = EMPEROR
		}
	}
	doesnt_holds_special_empire = yes
}
form_title_allow = {
	independent = yes
	is_adult = yes
	has_regent = no
	war = no
}
form_kingdom_allow = {
	form_title_allow = yes
	prestige = 500
}
form_empire_allow = {
	form_title_allow = yes
	prestige = 5000
}

can_hold_council_trigger = {
	OR = {
		AND = { #Patriarchal religions can only hire males. Matriarchal religions can only hire females.
			is_female = no 
			NOT = { liege = { has_religion_feature = religion_matriarchal } } 
		}
		AND = {
			is_female = yes 
			liege = { has_religion_feature = religion_matriarchal }
		}
		AND = {
			is_female = yes 
			is_feminist_religion = yes
			liege = { is_feminist_religion = yes }
		}
		trait = horse # So we can have female glitterhoofs! :D
		OR = {
			AND = { 
				is_female = yes
				liege = { primary_title = { has_law = status_of_women_4 } } 
			}
			has_game_rule = {
				name = gender
				value = all
			}
		}
	}
}

into_learning_trigger = {
	OR = {
		has_education_learning_trigger = yes
		has_lifestyle_learning_trigger = yes
		child_personality_learning_trigger = yes
	}
}
into_intrigue_trigger = {
	OR = {
		has_education_intrigue_trigger = yes
		has_lifestyle_intrigue_trigger = yes
		child_personality_intrigue_trigger = yes
	}
}
into_martial_trigger = {
	OR = {
		has_education_martial_trigger = yes
		has_lifestyle_martial_trigger = yes
		child_personality_martial_trigger = yes
	}
}
into_stewardship_trigger = {
	OR = {
		has_education_stewardship_trigger = yes
		has_lifestyle_stewardship_trigger = yes
		child_personality_stewardship_trigger = yes
	}
}
into_diplomacy_trigger = {
	OR = {
		has_education_diplomacy_trigger = yes
		has_lifestyle_diplomacy_trigger = yes
		child_personality_diplomacy_trigger = yes
	}
}

can_choose_invader_trigger = {
	has_game_rule = {
		name = invader_nations
		value = chosen
	}
	ai = no
}
can_plays_as_invader_trigger = {
	has_game_rule = {
		name = playing_as_invaders
		value = on
	}
	ai = no
}
#Madame desire triggers, used by the AI

desired_by_madame_1 = {
	OR = {
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_unattractive_trigger = yes
		}
		# Education and lifestyle based preferencesAND
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_young }
			NOT = { age = 17 }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_old }
			age = 50
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_christian }
			religion_group = christian
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_esoteric }
			religion_group = esoteric
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pagan_group }
			religion_group = pagan_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jewish_group }
			religion_group = jewish_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pirate }
			religion_group = pirate
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_muslim }
			religion_group = muslim
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_indian_group }
			religion_group = indian_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_buddhist_group }
			religion_group = buddhist_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zoroastrian_group }
			religion_group = zoroastrian_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_communist }
			is_communist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zarist }
			is_zarist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_nobelian }
			is_nobelian_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_ironist }
			is_ironist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_khanist }
			is_khanist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jacobinist }
			is_jacobinist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_female }
			is_female = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_male }
			is_female = no
		}
	}
}

hated_by_madame_1 = {
	OR = {
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_unattractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_young }
			age = 50
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_old }
			NOT = { age = 17 }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_christian }
			NOT = { religion_group = christian }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_esoteric }
			NOT = { religion_group = esoteric }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pagan_group }
			NOT = { religion_group = pagan_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jewish_group }
			NOT = { religion_group = jewish_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pirate }
			NOT = { religion_group = pirate }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_muslim }
			NOT = { religion_group = muslim }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_indian_group }
			NOT = { religion_group = indian_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_buddhist_group }
			NOT = { religion_group = buddhist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zoroastrian_group }
			NOT = { religion_group = zoroastrian_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_communist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zarist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_nobelian }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_ironist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_khanist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jacobinist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_female }
			is_female = no
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_male }
			is_female = yes
		}
	}
}

desired_by_madame_2 = {
	calc_true_if = {
		amount = 2
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_unattractive_trigger = yes
		}
		# Education and lifestyle based preferencesAND
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_young }
			NOT = { age = 17 }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_old }
			age = 50
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_christian }
			religion_group = christian
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_esoteric }
			religion_group = esoteric
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pagan_group }
			religion_group = pagan_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jewish_group }
			religion_group = jewish_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pirate }
			religion_group = pirate
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_muslim }
			religion_group = muslim
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_indian_group }
			religion_group = indian_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_buddhist_group }
			religion_group = buddhist_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zoroastrian_group }
			religion_group = zoroastrian_group
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_communist }
			is_communist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zarist }
			is_zarist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_nobelian }
			is_nobelian_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_ironist }
			is_ironist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_khanist }
			is_khanist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jacobinist }
			is_jacobinist_religion_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_female }
			is_female = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_male }
			is_female = no
		}
	}
}

hated_by_madame_2 = {
	calc_true_if = {
		amount = 2
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_unattractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_young }
			age = 50
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_old }
			NOT = { age = 17 }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_christian }
			NOT = { religion_group = christian }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_esoteric }
			NOT = { religion_group = esoteric }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pagan_group }
			NOT = { religion_group = pagan_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jewish_group }
			NOT = { religion_group = jewish_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_pirate }
			NOT = { religion_group = pirate }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_muslim }
			NOT = { religion_group = muslim }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_indian_group }
			NOT = { religion_group = indian_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_buddhist_group }
			NOT = { religion_group = buddhist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zoroastrian_group }
			NOT = { religion_group = zoroastrian_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_communist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_zarist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_nobelian }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_ironist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_khanist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_jacobinist }
			NOT = { religion_group = old_world_cultist_group }
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_female }
			is_female = no
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_male }
			is_female = yes
		}
	}
}