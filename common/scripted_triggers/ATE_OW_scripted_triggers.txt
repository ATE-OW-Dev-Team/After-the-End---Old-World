######################################
# Scripted Triggers for determine exile
######################################

is_anti_caliph = {
	OR = {
		has_claim = d_sunni
		has_claim = d_ibadi
		has_claim = d_shiite
		has_claim = d_bahai
		has_claim = d_wahhabi
	}
}

doesnt_holds_special_empire = {
	custom_tooltip = {
		text = does_not_hold_special_empire
		NOT = {
			any_demesne_title = {
				OR = {
					title = e_british_india
					title = e_zapadoslavia
					title = e_great_russia
					title = e_cccp
					title = e_european_union
					title = e_austria_hungary
				}
			}
		}
	}
}
form_kingdom_potential = {
	is_alternate_start = no
	is_vice_royalty = no
	independent = yes
	rebel = no
}
form_empire_potential = {
	form_kingdom_potential = yes
	any_demesne_title = {
		OR = {
			tier = KING
			tier = EMPEROR
		}
	}
	doesnt_holds_special_empire = yes
}
form_title_allow = {
	independent = yes
	is_adult = yes
	has_regent = no
	war = no
}
form_kingdom_allow = {
	form_title_allow = yes
	prestige = 500
}
form_empire_allow = {
	form_title_allow = yes
	prestige = 5000
}

isnt_forced_to_theocracy = {
	OR = {
		controls_religion = no
		AND = {
			religion_group = muslim
			NOT = { religion = bahai }
		}
		religion = jacobinist
		religion = zarist
		religion = stalinist
		religion = katerinist
		religion = trotskyite
		religion = titoist
		has_religion_feature = religion_temporal_head
		AND = {
			religion = norse_pagan_reformed
			has_religion_features = no # Old saves, and campaigns without HF, need the Fylkirate to continue working
		}
	}
}
is_equalist_religion = {
	OR = {
		holder_scope = { has_religion_feature = religion_equal }
		holder_scope = { has_religion_feature = religion_feature_bon }
		religion = bahai
		religion = katerinist
		has_game_rule = {
			name = gender
			value = all
		}
	}
}
is_feminist_religion = {
	OR = {
		holder_scope = { has_religion_feature = religion_matriarchal }
		is_equalist_religion = yes
	}
}

can_hold_council_trigger = {
	OR = {
		AND = { #Patriarchal religions can only hire males. Matriarchal religions can only hire females.
			is_female = no 
			NOT = { liege = { has_religion_feature = religion_matriarchal } } 
		}
		AND = {
			is_female = yes 
			liege = { has_religion_feature = religion_matriarchal }
		}
		AND = {
			is_female = yes 
			is_feminist_religion = yes
			liege = { is_feminist_religion = yes }
		}
		trait = horse # So we can have female glitterhoofs! :D
		OR = {
			AND = { 
				is_female = yes
				liege = { primary_title = { has_law = status_of_women_4 } } 
			}
			has_game_rule = {
				name = gender
				value = all
			}
		}
	}
}

into_learning_trigger = {
	OR = {
		has_education_learning_trigger = yes
		has_lifestyle_learning_trigger = yes
		child_personality_learning_trigger = yes
	}
}
into_intrigue_trigger = {
	OR = {
		has_education_intrigue_trigger = yes
		has_lifestyle_intrigue_trigger = yes
		child_personality_intrigue_trigger = yes
	}
}
into_martial_trigger = {
	OR = {
		has_education_martial_trigger = yes
		has_lifestyle_martial_trigger = yes
		child_personality_martial_trigger = yes
	}
}
into_stewardship_trigger = {
	OR = {
		has_education_stewardship_trigger = yes
		has_lifestyle_stewardship_trigger = yes
		child_personality_stewardship_trigger = yes
	}
}
into_diplomacy_trigger = {
	OR = {
		has_education_diplomacy_trigger = yes
		has_lifestyle_diplomacy_trigger = yes
		child_personality_diplomacy_trigger = yes
	}
}

#Madame desire triggers, used by the AI

desired_by_madame_1 = {
	OR = {
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_unattractive_trigger = yes
		}
		# Education and lifestyle based preferencesAND
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_intrigue_trigger = yes
		}
	}
}

hated_by_madame_1 = {
	OR = {
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_unattractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_stewardship_trigger = yes
		}
	}
}

desired_by_madame_2 = {
	calc_true_if = {
		amount = 2
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_unattractive_trigger = yes
		}
		# Education and lifestyle based preferencesAND
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_martial_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_intrigue_trigger = yes
		}
	}
}

hated_by_madame_2 = {
	calc_true_if = {
		amount = 2
		AND = {
			FROM = { has_character_modifier = madame_wants_strong }
			is_weak_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_weak }
			is_strong_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_smart }
			is_dumb_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_dumb }
			is_smart_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_virtue }
			has_vice_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_vice }
			has_virtue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_attractive }
			is_unattractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_unattractive }
			is_attractive_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_martial }
			into_diplomacy_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_learning }
			into_learning_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_intrigue }
			into_intrigue_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_stewardship }
			into_stewardship_trigger = yes
		}
		AND = {
			FROM = { has_character_modifier = madame_wants_diplomacy }
			into_stewardship_trigger = yes
		}
	}
}